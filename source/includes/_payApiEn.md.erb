# API list

## Fiat Currency Recharge Interface

### Application Scenarios

BitFS payment means that the merchant displays goods or services on the PC or mobile webpage. When the user confirms the use of BitFS payment on the aforementioned page, the merchant initiates this service to call the [BitFS] APP for quick payment. Mainly used in scenarios where smartphone browsers request BitFS payment. You can easily evoke BitFS payment from an external browser. This interface is called when merchandise goods are priced in fiat currency.

### General

- API name: recharge interface-legal tender price

* Request method: HTTP POST
* Request URL: pay / v1 / unifiedorder

### Request Parameters

>request:

~~~java
{
 	"mch_id":"441649692783284224",
 	"device_type":"PC",
 	"nonce_str":"FEC838C0BEA5468A82E2467DA4F70B8C",
    "local":"en_US",
 	"out_trade_no":"7faf7e60a92d4afa963b83933a949ecc",
 	"spbill_create_ip":127.0.0.1,
 	"fee_type":"CNY",
 	"trade_type":"DEPOSIT",
 	"body":"Mini game-recharge coupon",
 	"total_amount":"100",
 	"notify_url":"https://www.baidu.com",
 	"timestamp":1585471277677,
 	"appKey":"fc798420836184e33c042de1caa2814a",
 	"sign":"F752ABD95162A4A95E7C4A5E33DAEDD9"
}
~~~

| Field Name                  | Parameter        | Type       | Required | Example                          | Description                                                  |
| --------------------------- | :--------------- | ---------- | :------- | :------------------------------- | :----------------------------------------------------------- |
| Merchant Id                 | mch_id           | String     | true     | 441649692783284224               | Merchant ID distributed by BitFS                             |
| Device Type                 | device_type      | String     | true     | PC                               | Whether the device that initiated the request comes from the mobile terminal or the PC terminal |
| Additional Data             | attach           | String     | false    | Guangzhou Head Office            | Additional Data, returned as it is in the query API and payment notification. This Field Name is mainly used by merchants to carry custom data for orders |
| Random string               | nonce_str        | String     | true     | FEC838C0BEA5468A82E2467DA4F70B8C | Random string, not longer than 32 bits                       |
| Local language              | local            | String     | true     | en_US                            | Fill in the local network language according to international standards |
| Merchant Order Number       | out_trade_no     | String     | true     | 7faf7e60a92d4afa963b83933a949ecc | The internal order number of the merchant system, within 32 characters, can only be numbers, uppercase and lowercase letters, and unique under the same merchant number |
| Terminal Ip                 | spbill_create_ip | String     | true     | 127.0.0.1                        | Must pass the correct client IP, support ipv4, ipv6 format   |
| Signature Type              | sign_type        | String     | false    | MD5                              | Signature Type, default is MD5                               |
| Currency Type               | fee_type         | String     | true     | CNY                              | Three-letter code in accordance with ISO 4217.See the list of fiat currencies for details |
| Transaction Type            | trade_type       | String     | true     | DEPOSI                           | Deposit: DEPOSIT Withdrawal: WITHDRAW                        |
| Product Description         | body             | String     | true     | “Mini game-recharge coupon”      | Commodity Simple Description, the Field Name must be passed in strict accordance with the specifications |
| Recharge amount             | total_amount     | BigDecimal | true     | 100                              | The total amount of the order                                |
| Result Notification Address | notify_url       | String     | true     | https://www.baidu.com            | Receive the callback address for asynchronous notification of BitFS payment. For details, please refer to "Callback Notification" |
| Timestamp                   | timestamp        | String     | true     | 1585471277677                    | The time in milliseconds when the order was initiated        |
| Merchant AppKey             | appKey           | String     | true     | 1e75e94982f80bd1f219ea807af96bd5 | Merchant AppKey assigned by BitFS                            |
| Sign                        | sign             | String     | true     | 13F9609AA53A8AEBED5516EE8696A995 | Sign.See Sign generation algorithm for details               |

### Response Content

>response:

~~~java
{
    "code": 0,
    "msg": "SUCCESS",
    "result": "{
        "pay_url":"http://174.139.156.39:8866/#/?id=439535840037699584",
    	"mch_id":"441649692783284224",
    	"trade_type":"DEPOSIT",
    	"nonce_str":"FEC838C0BEA5468A82E2467DA4F70B8C",
    	"sign":"F752ABD95162A4A95E7C4A5E33DAEDD9"
	}"
}
~~~

| Field Name  | Parameter | Required | Type        | Example | Description                                                  |
| ----------- | --------- | -------- | ----------- | ------- | ------------------------------------------------------------ |
| Code        | code      | true     | Int         | 0       | Gateway return code, return 0 when the call is successful    |
| Information | msg       | true     | String(255) | success | Information is the cause of the error when the code is not 0, for example: Sign failed; parameter format check error |

<aside class="notice">The following Field Name is returned when the code is 0</aside>

| Field Name        | Parameter  | Required | Type   | Example                                               | Description                                                  |
| :---------------- | :--------- | :------- | ------ | ----------------------------------------------------- | ------------------------------------------------------------ |
| Payment Jump Link | pay_url    | true     | String | http://174.139.156.39:8844/#/currency/currinformation | pay_url is the middle page for pulling up BitFS payment. You can complete the payment by scanning the page and pulling up the BitFS App payment interface. |
| Merchant Id       | mch_id     | true     | String | 441649692783284224                                    | The id assigned to the merchant by BitFS                     |
| Transaction Type  | trade_type | true     | String | DEPOSIT                                               | Deposit: DEPOSIT: Withdraw: WITHDRAW                         |
| Random string     | nonce_str  | true     | String | FEC838C0BEA5468A82E2467DA4F70B8C                      | Random string returned by BitFS                              |
| Sign              | sign       | true     | String | F752ABD95162A4A95E7C4A5E33DAEDD9                      | Sign returned by BitFS                                       |

### Error Code

| Name                   | Description                           | Reason                                                  | Solution                                                     |
| ---------------------- | ------------------------------------- | ------------------------------------------------------- | ------------------------------------------------------------ |
| APPKEY_MCHID_NOT_MATCH | machId does not match Merchant AppKey | machId does not match Merchant AppKey                   | Please confirm that appid and mch_id match                   |
| SIGNERROR              | Sign error                            | Parameter Sign result is incorrect                      | Please check whether Sign parameters and methods meet the requirements of Sign algorithm |
| OUT_TRADE_NO_USED      | Merchant order number is duplicated   | The same transaction cannot be submitted multiple times | Please verify whether Merchant Order Number is submitted repeatedly |
| LACK_PARAMS            | Missing parameters                    | Missing required request parameters                     | Please check if the parameters are complete                  |
| SYSTEMERROR            | System error                          | System timeout                                          | The system is abnormal, please call again with the same parameters |
| COIN_NOT_EXIST         | Currency not supported                | The requested currency is not supported                 | Please refer to the currency list to upload the correct currency |
| ACCOUNT_NOT_EXIST      | Account does not exist                | Merchant account does not exist                         | Please check whether the merchant account information is correct |

## Digital Currency Recharge Interface

### Application Scenario

BitFS payment means that the merchant displays goods or services on the PC or mobile webpage. When the user confirms the use of BitFS payment on the aforementioned page, the merchant initiates this service to call the BitFS APP for rapid payment. Mainly used in scenarios where smartphone browsers request BitFS payment. You can easily evoke BitFS payment from an external browser. This interface is called when merchandise goods are priced in digital currency.

### Generalize

* Name：Recharge interface-digital currency pricing

* Request Method：HTTP POST
* Request URL：pay/v1/coinunifiedorder

### Request Parameters

>request:

~~~java
{
    "mch_id":"441649692783284224",
    "device_type":"PC",
    "nonce_str":"FEC838C0BEA5468A82E2467DA4F70B8C",
    "local":"en_US",
    "out_trade_no":"7faf7e60a92d4afa963b83933a949ecc",
    "spbill_create_ip":127.0.0.1,
    "fee_type":"BTC",
    "trade_type":"DEPOSIT",
    "body":"Mini game-recharge coupon",
    "total_amount":"1000",
    "notify_url":"https://www.baidu.com",
    "timestamp":1585471277677,
    "appKey":"fc798420836184e33c042de1caa2814a",
    "sign":"F752ABD95162A4A95E7C4A5E33DAEDD9"
}
~~~

| Field Name                  | Parameter        | Type       | Required | Example                          | Description                                                  |
| --------------------------- | ---------------- | ---------- | -------- | -------------------------------- | ------------------------------------------------------------ |
| Merchant Id                 | mch_id           | String     | true     | 441649692783284224               | Merchant ID distributed by BitFS                             |
| Device Type                 | device_type      | String     | true     | PC                               | Whether the device that initiated the request comes from the mobile terminal or the PC terminal。 |
| Additional Data             | attach           | String     | false    | Guangzhou Head Office            | Additional Data, returned as it is in the query API and payment notification. This Field Name is mainly used by merchants to carry custom data for orders。 |
| Random string               | nonce_str        | String     | true     | FEC838C0BEA5468A82E2467DA4F70B8C | Random string，not longer than 32 bits.                      |
| Local language              | local            | String     | true     | en_US                            | Fill in the local network language according to international standards |
| Merchant Order Number       | out_trade_no     | String     | true     | 7faf7e60a92d4afa963b83933a949ecc | The order number within the merchant system, within 32 characters, may contain letters. |
| Signature Type              | sign_type        | String     | false    | MD5                              | Signature Type, default is MD5                               |
| Terminal Ip                 | spbill_create_ip | String     | true     | 127.0.0.1                        | Must pass the correct client IP, support ipv4, ipv6 format   |
| Currency Type               | fee_type         | String     | true     | BTC                              | Three-letter code in accordance with ISO 4217,详见数字货币列表 |
| Transaction Type            | trade_type       | String     | true     | DEPOSIT                          | Deposit: DEPOSIT; Withdraw: WITHDRAW                         |
| Product Description         | body             | String     | true     | “Mini game-recharge coupon”      | Commodity Simple Description, the Field Name must be passed in strict accordance with the specifications |
| Recharge amount             | total_amount     | BigDecimal | true     | 1000                             | Total order amount                                           |
| Result Notification Address | notify_url       | String     | true     | https://www.baidu.com            | Receive the callback address for asynchronous notification of BitFS payment. For details, please refer to "Callback Notification" |
| Timestamp                   | timestamp        | String     | true     | 1585471277677                    | The time in milliseconds when the order was initiated        |
| Merchant AppKey             | appKey           | String     | true     | 1e75e94982f80bd1f219ea807af96bd5 | Merchant AppKey assigned by BitFS                            |
| Sign                        | sign             | String     | true     | 13F9609AA53A8AEBED5516EE8696A995 | Sign.See Sign generation algorithm for details，Default MD5  |

### Response Content

~~~java
{
    "code": 0,
    "msg": "SUCCESS",
    "result": "{
        "pay_url":"http://174.139.156.39:8866/#/?id=439535840037699584",
    	"mch_id":"441649692783284224",
    	"trade_type":"DEPOSIT",
    	"nonce_str":"FEC838C0BEA5468A82E2467DA4F70B8C",
    	"sign":"F752ABD95162A4A95E7C4A5E33DAEDD9"
	}"

}
~~~

| Field Name  | Parameter | Required | Type        | Example | Description                                                  |
| :---------- | --------- | -------- | ----------- | ------- | ------------------------------------------------------------ |
| Code        | code      | true     | Int         | 0       | Gateway return code, return 0 when the call is successful    |
| Information | msg       | true     | String(255) | success | When the code is not 0, the Information is an error Reason, for example: Sign failed; parameter format check error |

<aside class="notice">The following Field Name is returned when the code is 0</aside>

| Field Name        | Parameter  | Required | Type   | Example                                               | Description                                                  |
| ----------------- | ---------- | -------- | ------ | ----------------------------------------------------- | ------------------------------------------------------------ |
| Payment Jump Link | pay_url    | true     | String | http://174.139.156.39:8844/#/currency/currinformation | pay_url is the middle page for pulling up BitFS payment. You can complete the payment by scanning the page and pulling up the BitFS App payment interface. |
| Merchant Id       | mch_id     | true     | String | 441649692783284224                                    | The id assigned to the merchant by BitFS                     |
| Transaction Type  | trade_type | true     | String | DEPOSIT                                               | Deposit: DEPOSIT: Withdraw: WITHDRAW                         |
| Random string     | nonce_str  | true     | String | FEC838C0BEA5468A82E2467DA4F70B8C                      | Random string returned by BitFS                              |
| Sign              | sign       | true     | String | F752ABD95162A4A95E7C4A5E33DAEDD9                      | Sign returned by BitFS                                       |

### Error Code

| Name                   | Description                           | Reason                                                  | Solution                                                     |
| ---------------------- | ------------------------------------- | ------------------------------------------------------- | ------------------------------------------------------------ |
| APPKEY_MCHID_NOT_MATCH | machId does not match Merchant AppKey | machId does not match Merchant AppKey                   | Please confirm that appid and mch_id match                   |
| SIGNERROR              | Sign error                            | Parameter Sign result is incorrect                      | Please check whether Sign parameters and methods meet the requirements of Sign algorithm |
| OUT_TRADE_NO_USED      | Merchant order number is duplicated   | The same transaction cannot be submitted multiple times | Please verify whether Merchant Order Number is submitted repeatedly |
| LACK_PARAMS            | Missing parameters                    | Missing required request parameters                     | Please check if the parameters are complete                  |
| SYSTEMERROR            | System error                          | System timeout                                          | The system is abnormal, please call again with the same parameters |
| COIN_NOT_EXIST         | Currency not supported                | The requested currency is not supported                 | Please refer to the currency list to upload the correct currency |
| ACCOUNT_NOT_EXIST      | Account does not exist                | Merchant account does not exist                         | Please check whether the merchant account information is correct |

 

## Query the fiat currency interface supported by deposit / withdraw

### Application Scenario

It is used to query the legal currency that BitFS can support when calling the BitFS deposit / withdrawal interface, and can verify whether the calling interface currency is supported in real time.

### Generalize

* Name：Query the fiat currency interface supported by deposit / withdraw
* Request Method：HTTP GET
* Request URL：pay/v1/currencyList

### Request Parameters

NULL

### Response Content

| Field Name  | Parameter | Required | Type        | Example | Description                                                  |
| ----------- | --------- | -------- | ----------- | ------- | ------------------------------------------------------------ |
| Code        | code      | true     | Int         | 0       | Return code, return 0 when the call is successful            |
| Information | msg       | true     | String(255) | success | When the code is not 0, the Information is an error Reason, for example: request timeout |

<aside class="notice">The following Field Name is returned when code = 0</aside>

| Field Name | Parameter | Required | Type   | Example | Description |
| ---------- | --------- | -------- | ------ | ------- | ----------- |
| Name       | fee_name  | true     | String | CNY     | Name        |
| Code       | fee_type  | true     | String | CNY     | Code        |



## Query digital currency currency interface supported by deposit / withdraw

### Application Scenario

It is used to query the digital currency currencies that BitFS can support when calling the BitFS deposit / withdrawal interface, and can verify whether the calling interface currency is supported in real time.

### Generalize

* Name：Query digital currency currency interface supported by deposit / withdraw
* Request Method：HTTP GET
*  Request URL：pay/v1/digiccyList

### Request Parameters

NULL

### Response Content

| Field Name  | Parameter | Required | Type        | Example | Description                                                  |
| ----------- | --------- | -------- | ----------- | ------- | ------------------------------------------------------------ |
| Code        | code      | true     | Int         | 0       | Return code, return 0 when the call is successful            |
| Information | msg       | true     | String(255) | success | When the code is not 0, the Information is an error Reason, for example: request timeout |

<aside class="notice">The following Field Name is returned when code = 0</aside>

| Field Name | Parameter | Required | Type   | Example | Description                 |
| ---------- | --------- | -------- | ------ | ------- | --------------------------- |
| Name       | fee_name  | true     | String | BTC     | Digital currency name       |
| Code       | fee_type  | true     | String | BTC     | Digital currency code value |



## Withdrawal interface--fiat interface

### Application Scenario

When BitFS users initiate withdrawals in the merchant system, the merchant system calls this interface to easily transfer money to the user using the merchant account. BitFS converts the amount of fiat currency into USDT at the real-time market exchange rate.

### Generalize

* Name：Withdrawal interface--fiat interface

* Request Method：HTTP POST

* Request URL：pay/v1/withdraw

### Request Parameters

> request:

~~~java
{
    "mch_id":"441649692783284224",
    "area_code":"0086",
    "get_account":"13899996666",
    "nonce_str":"FEC838C0BEA5468A82E2467DA4F70B8C",
    "out_trade_no":"7faf7e60a92d4afa963b83933a949ecc",
    "spbill_create_ip":127.0.0.1,
    "fee_type":"CNY",
    "trade_type":"WITHDRAW",
    "total_amount":"100",
    "notify_url":"https://www.baidu.com",
    "timestamp":1585471277677,
    "appKey":"fc798420836184e33c042de1caa2814a",
    "sign":"F752ABD95162A4A95E7C4A5E33DAEDD9"
}
~~~

| Field Name                           | Parameter        | Type       | Required | Example                          | Description                                                  |
| ------------------------------------ | ---------------- | ---------- | -------- | -------------------------------- | ------------------------------------------------------------ |
| Merchant Id                          | mch_id           | String     | true     | 441649692783284224               | Merchant ID distributed by BitFS                             |
| Where the withdrawal account belongs | area_code        | String     | true     | 0086                             | Where the withdrawal account belongs                         |
| Withdraw Account                     | get_account      | String     | true     | 13899996666                      | The account that initiated the withdrawal.                   |
| Additional Data                      | attach           | String     | false    | Common Withdrawal                | Additional Data, returned as it is in the query API and payment notification. This Field Name is mainly used by merchants to carry custom data for orders。 |
| Random string                        | nonce_str        | String     | true     | FEC838C0BEA5468A82E2467DA4F70B8C | Random string，not longer than 32 bits.                      |
| Merchant Order Number                | out_trade_no     | String     | true     | 7faf7e60a92d4afa963b83933a949ecc | The order number within the merchant system, within 32 characters, may contain letters. |
| Signature Type                       | sign_type        | String     | true     | MD5                              | Signature Type, default is MD5                               |
| Terminal Ip                          | spbill_create_ip | String     | true     | 127.0.0.1                        | Must pass the correct client IP, support ipv4, ipv6 format   |
| Currency Type                        | fee_type         | String     | true     | CNY                              | Three-letter code in accordance with ISO 4217,See the list of fiat currencies for details |
| Transaction Type                     | trade_type       | String     | true     | WITHDRAW                         | Deposit: DEPOSIT Withdrawal: WITHDRAW                        |
| Recharge amount                      | total_amount     | BigDecimal | true     | 1000                             | The total amount of the order                                |
| Result Notification Address          | notify_url       | String     | true     | https://www.baidu.com            | Receive the callback address for asynchronous notification of BitFS payment. For details, please refer to "Callback Notification" |
| Timestamp                            | timestamp        | String     | true     | 1585471277677                    | The time in milliseconds when the order was initiated        |
| Merchant AppKey                      | appKey           | String     | true     | 1e75e94982f80bd1f219ea807af96bd5 | Merchant AppKey assigned by BitFS                            |
| Sign                                 | sign             | String     | true     | 13F9609AA53A8AEBED5516EE8696A995 | Sign，see Sign generation algorithm for details，Default MD5 |

### Response Content

> response

~~~java
{
    "code": 0,
    "msg": "SUCCESS",
    "result": "{
        "mch_id":"441649692783284224",
    	"trade_type":"DEPOSIT",
    	"nonce_str":"FEC838C0BEA5468A82E2467DA4F70B8C",
    	"sign":"F752ABD95162A4A95E7C4A5E33DAEDD9"
	}"
}
~~~

| Field Name  | Parameter | Required | Type        | Example | Description                                                  |
| ----------- | --------- | -------- | ----------- | ------- | ------------------------------------------------------------ |
| Code        | code      | true     | Int         | 0       | Gateway return code, return 0 when the call is successful    |
| Information | msg       | true     | String(255) | success | When the code is not 0, the Information is an error Reason, for example: Sign failed or parameter format check error |

<aside class="notice">The following Field Name is returned when the code is 0</aside>

| Field Name       | Parameter  | Required | Type   | Example                          | Description                              |
| ---------------- | ---------- | -------- | ------ | -------------------------------- | ---------------------------------------- |
| Merchant Id      | mch_id     | true     | String | 441649692783284224               | The id assigned to the merchant by BitFS |
| Transaction Type | trade_type | true     | String | WITHDRAW                         | Deposit: DEPOSIT; Withdraw: WITHDRAW     |
| Random string    | nonce_str  | true     | String | FEC838C0BEA5468A82E2467DA4F70B8C | Random string returned by BitFS          |
| Sign             | sign       | true     | String | F752ABD95162A4A95E7C4A5E33DAEDD9 | Sign returned by BitFS                   |

### Error Code

| Name                       | Description                           | Reason                                                  | Solution                                                     |
| -------------------------- | ------------------------------------- | ------------------------------------------------------- | ------------------------------------------------------------ |
| APPKEY_MCHID_NOT_MATCH     | machId does not match Merchant AppKey | machId does not match Merchant AppKey                   | Please confirm that appid and mch_id match                   |
| SIGNERROR                  | Sign error                            | Parameter Sign result is incorrect                      | Please check whether Sign parameters and methods meet the requirements of Sign algorithm |
| OUT_TRADE_NO_USED          | Merchant order number is duplicated   | The same transaction cannot be submitted multiple times | Please verify whether Merchant Order Number is submitted repeatedly |
| LACK_PARAMS                | Missing parameters                    | Missing required request parameters                     | Please check if the parameters are complete                  |
| SYSTEMERROR                | System error                          | System timeout                                          | The system is abnormal, please call again with the same parameters |
| COIN_NOT_EXIST             | Currency not supported                | The requested currency is not supported                 | Please refer to the currency list to upload the correct currency |
| TRANSFER_ACCOUNT_NOT_EXIST | Transfer account does not exist       | Merchant account does not exist                         | Please check whether the merchant account information is correct |
| YOLLON_NOT_EXIST           | Collection account does not exist     | Withdrawal user Bitfs account does not exist            | Please ensure that the withdrawal account is a bitfs user    |

## Withdrawal interface--digital currency interface

### Application Scenario

When a BitFS user initiates a withdrawal in the merchant system, the merchant system calls this interface to easily transfer money to the user using the merchant account. BitFS converts the amount of digital currency into USDT at the real-time market exchange rate.

### Generalize

* Name：Withdrawal interface--digital currency interface

* Request Method：HTTP POST

* Request URL：pay/v1/coinwithdraw

### Request Parameters

> request:

~~~java
{
    "mch_id":"441649692783284224",
    "area_code":"0086"
    "get_account":"13899996666",
    "nonce_str":"FEC838C0BEA5468A82E2467DA4F70B8C",
    "out_trade_no":"7faf7e60a92d4afa963b83933a949ecc",
    "spbill_create_ip":127.0.0.1,
    "fee_type":"BTC",
    "trade_type":"WITHDRAW",
    "total_amount":"1000",
    "notify_url":"https://www.baidu.com",
    "timestamp":1585471277677,
    "appKey":"fc798420836184e33c042de1caa2814a",
    "sign":"F752ABD95162A4A95E7C4A5E33DAEDD9"
}
~~~

| Field Name                           | Parameter        | Type       | Required | Example                          | Description                                                  |
| ------------------------------------ | ---------------- | ---------- | -------- | -------------------------------- | ------------------------------------------------------------ |
| Merchant Id                          | mch_id           | String     | true     | 441649692783284224               | Merchant ID distributed by BitFS                             |
| Where the withdrawal account belongs | area_code        | String     | true     | 0086                             | Where the withdrawal account belongs                         |
| Withdraw Account                     | get_account      | String     | true     | 13899996666                      | The account that initiated the withdrawal.                   |
| Additional Data                      | attach           | String     | false    | Common Withdrawal                | Additional Data, returned as it is in the query API and payment notification. This Field Name is mainly used by merchants to carry custom data for orders。 |
| Random string                        | nonce_str        | String     | true     | FEC838C0BEA5468A82E2467DA4F70B8C | Random string，not longer than 32 bits.                      |
| Merchant Order Number                | out_trade_no     | String     | true     | 7faf7e60a92d4afa963b83933a949ecc | The order number within the merchant system, within 32 characters, may contain letters. |
| Signature Type                       | sign_type        | String     | true     | MD5                              | Signature Type, default is MD5                               |
| Terminal Ip                          | spbill_create_ip | String     | true     | 127.0.0.1                        | Must pass the correct client IP, support ipv4, ipv6 format   |
| Currency Type                        | fee_type         | String     | true     | BTC                              | The coin code of the withdrawal.See the list of fiat currencies for details |
| Transaction Type                     | trade_type       | String     | true     | WITHDRAW                         | Deposit: DEPOSIT; Withdraw: WITHDRAW                         |
| Recharge amount                      | total_amount     | BigDecimal | true     | 1000                             | The total amount of the order                                |
| Result Notification Address          | notify_url       | String     | true     | https://www.baidu.com            | Receive the callback address for asynchronous notification of BitFS payment. For details, please refer to "Callback Notification" |
| Timestamp                            | timestamp        | String     | true     | 1585471277677                    | The time in milliseconds when the order was initiated        |
| Merchant AppKey                      | appKey           | String     | true     | 1e75e94982f80bd1f219ea807af96bd5 | Merchant AppKey assigned by BitFS                            |
| Sign                                 | sign             | String     | true     | 13F9609AA53A8AEBED5516EE8696A995 | Sign，See Sign generation algorithm for details;Default MD5  |

### Response Content

> response:

~~~java
{
    "code": 0,
    "msg": "success",
    "result": "{
        "mch_id":"441649692783284224",
    	"trade_type":"DEPOSIT",
    	"nonce_str":"FEC838C0BEA5468A82E2467DA4F70B8C",
    	"sign":"F752ABD95162A4A95E7C4A5E33DAEDD9"
	}"
}
~~~

| Field Name  | Parameter | Required | Type        | Example | Description                                                  |
| ----------- | --------- | -------- | ----------- | ------- | ------------------------------------------------------------ |
| Code        | code      | true     | Int         | 0       | Gateway return code, return 0 when the call is successful    |
| Information | msg       | true     | String(255) | success | When the code is not 0, the Information is an error Reason, such as a sign failure or a parameter format check error |

<aside class="notice">The following Field Name is returned when the code is 0</aside>

| Field Name       | Parameter  | Required | Type   | Example                          | Description                              |
| ---------------- | ---------- | -------- | ------ | -------------------------------- | ---------------------------------------- |
| Merchant Id      | mch_id     | true     | String | 441649692783284224               | The id assigned to the merchant by BitFS |
| Transaction Type | trade_type | true     | String | WITHDRAW                         | Deposit: DEPOSIT; Withdraw: WITHDRAW     |
| Random string    | nonce_str  | true     | String | FEC838C0BEA5468A82E2467DA4F70B8C | Random string returned by BitFS          |
| Sign             | sign       | true     | String | F752ABD95162A4A95E7C4A5E33DAEDD9 | Sign returned by BitFS                   |

### Error Code

| Name                       | Description                           | Reason                                                  | Solution                                                     |
| -------------------------- | ------------------------------------- | ------------------------------------------------------- | ------------------------------------------------------------ |
| APPKEY_MCHID_NOT_MATCH     | machId does not match Merchant AppKey | machId does not match Merchant AppKey                   | Please confirm that appid and mch_id match                   |
| SIGNERROR                  | Sign error                            | Parameter Sign result is incorrect                      | Please check whether Sign parameters and methods meet the requirements of Sign algorithm |
| OUT_TRADE_NO_USED          | Merchant order number is duplicated   | The same transaction cannot be submitted multiple times | Please verify whether Merchant Order Number is submitted repeatedly |
| LACK_PARAMS                | Missing parameters                    | Missing required request parameters                     | Please check if the parameters are complete                  |
| SYSTEMERROR                | System error                          | System timeout                                          | The system is abnormal, please call again with the same parameters |
| COIN_NOT_EXIST             | Currency not supported                | The requested currency is not supported                 | Please refer to the currency list to upload the correct currency |
| TRANSFER_ACCOUNT_NOT_EXIST | Transfer account does not exist       | Merchant account does not exist                         | Please check whether the merchant account information is correct |
| YOLLON_NOT_EXIST           | Collection account does not exist     | Withdrawal user Bitfs account does not exist            | Please ensure that the withdrawal account is a bitfs user    |

## Query merchant balance interface

### Application Scenario

Merchants can call this interface to query their account balances conveniently after BitFS registration is successful, and adjust their own business flexibly.

### Generalize

* Name：Query merchant balance interface

* Request Method：HTTP  POST

* Request URL：pay/v1/checkacct

### Request Parameters

> request:

~~~java
{
    "mch_id":"441649692783284224",
    "nonce_str":"FEC838C0BEA5468A82E2467DA4F70B8C",
    "fee_type":"usdt",
    "appKey":"f09b650179d5e01930d9c7b78c300147&3129384845945498",
    "sign":"F752ABD95162A4A95E7C4A5E33DAEDD9”
}
~~~

| Field Name     | Parameter | Required | Type   | Example                          | Description                              |
| -------------- | --------- | -------- | ------ | -------------------------------- | ---------------------------------------- |
| Merchant Id    | mch_id    | true     | String | 441649692783284224               | The id assigned to the merchant by BitFS |
| Random string  | nonce_str | true     | String | FEC838C0BEA5468A82E2467DA4F70B8C | Random string                            |
| Type           | fee_type  | true     | String | BTC                              | Coin Code                                |
| appkey         | appkey    | true     | String | fc798420836184e33c042de1caa2814a | Appkey assigned by BitFs                 |
| Sign           | sign      | true     | String | F752ABD95162A4A95E7C4A5E33DAEDD9 | Sign                                     |
| Signature Type | sign_type | false    | String | MD5                              | Signature Type，Default MD5              |

### Response Content

> response:

~~~java
{
    "code": 0,
    "msg": "success",
    "result": "{
        "mch_id":"441649692783284224",
    	"balance":"1000.56812",
    	"freeze":"1236.9872",
    	"nonce_str":"FEC838C0BEA5468A82E2467DA4F70B8C",
    	"sign":"F752ABD95162A4A95E7C4A5E33DAEDD9"

	}"
}
~~~

| Field Name  | Parameter | Required | Type        | Example | Description                                                  |
| ----------- | --------- | -------- | ----------- | ------- | ------------------------------------------------------------ |
| Code        | code      | true     | Int         | 0       | Gateway return code, return 0 when the call is successful    |
| Information | msg       | true     | String(255) | success | When the code is not 0, the Information is an error Reason, for example: Parameter check error |

<aside class="notice">The following Field Name is returned when the code is 0</aside>

| Field Name        | Parameter | Required | Type   | Example                          | Description                                       |
| ----------------- | --------- | -------- | ------ | -------------------------------- | ------------------------------------------------- |
| Merchant Id       | mch_id    | true     | String | 441649692783284224               | The id assigned to the merchant by BitFS          |
| Available Balance | balance   | true     | String | 1000.56812                       | Available balance of merchant's current currency  |
| Frozen Amount     | freeze    | true     | String | 1236.9872                        | The number of merchant's current currency freezes |
| Random string     | nonce_str | true     | String | FEC838C0BEA5468A82E2467DA4F70B8C | Random string returned by BitFS                   |
| Sign              | sign      | true     | String | F752ABD95162A4A95E7C4A5E33DAEDD9 | Sign returned by BitFS                            |

### Error Code

| Name                   | Description                           | Reason                                  | Solution                                                     |
| ---------------------- | ------------------------------------- | --------------------------------------- | ------------------------------------------------------------ |
| APPKEY_MCHID_NOT_MATCH | machId does not match Merchant AppKey | machId does not match Merchant AppKey   | Please confirm that appid and mch_id match                   |
| SIGNERROR              | Sign error                            | Parameter Sign result is incorrect      | Please check whether Sign parameters and methods meet the requirements of Sign algorithm |
| LACK_PARAMS            | Missing parameters                    | Missing required request parameters     | Please check if the parameters are complete                  |
| SYSTEMERROR            | System error                          | System timeout                          | The system is abnormal, please call again with the same parameters |
| COIN_NOT_EXIST         | Currency not supported                | The requested currency is not supported | Please refer to the currency list to upload the correct currency |

## Query merchant order interface

### Application Scenario

This interface provides query of all BitFS payment orders. Merchants can actively query the order status through the query order interface to complete the next business logic.

**Need to call the query interface**

- When the merchant background, network, server, etc. are abnormal, the merchant system does not receive the payment notification in the end;
- After calling the payment interface, return System error or unknown transaction status;

### Generalize

- Name：Query merchant order interface

- Request Method：HTTP POST

- Request URL：pay/v1/queryorder

### Request Parameters

> request:

~~~java
{
    "mch_id":"441649692783284224",
    "out_trade_no":"7faf7e60a92d4afa963b83933a949ecc",
    "nonce_str":"FEC838C0BEA5468A82E2467DA4F70B8C",
    "appKey":"a58b139c85adbccf3a4b3a8e83a2bfba",
    "sign":"FB87C3106C43DF67513ABDFE8029A096"
}
~~~

| Field Name            | Parameter    | Required | Type   | Example                          | Description                                                  |
| --------------------- | ------------ | -------- | ------ | -------------------------------- | ------------------------------------------------------------ |
| Merchant Id           | mch_id       | true     | String | 441649692783284224               | Merchants allocated by BitFs                                 |
| Merchant Order Number | out_trade_no | true     | String | 7faf7e60a92d4afa963b83933a949ecc | The order number within the merchant system, within 32 characters, may contain letters |
| Random string         | nonce_str    | true     | String | FEC838C0BEA5468A82E2467DA4F70B8C | Random string                                                |
| Signature Type        | sign_type    | false    | String | MD5                              | Signature Type, default is MD5                               |
| Appkey                | appKey       | true     | String | a58b139c85adbccf3a4b3a8e83a2bfba | Merchant's appkey                                            |
| Sign                  | sign         | true     | String | FB87C3106C43DF67513ABDFE8029A096 | Sign。                                                       |

### Response Content

> response:

~~~java
{
    "code": 0,
    "msg": "SUCCESS",
    "result": "{
        "mch_id":"441649692783284224",
    	"out_trade_no":"7faf7e60a92d4afa963b83933a949ecc",
    	"total_amount":"14.14",
    	"transaction_id":"44240523622d4b2ca836176cd88085d3",
    	"trade_type":"DEPOSIT",
    	"fee_type":"CNY",
    	"attach":"Recharge of Guangzhou Branch",
    	"trade_state":"100",
    	"tick_price":"7.00",
    	"order_fee":"2.02",
    	"trade_state_desc":"Cancel Transaction",
    	"nonce_str":"FEC838C0BEA5468A82E2467DA4F70B8C",
    	"sign":"F752ABD95162A4A95E7C4A5E33DAEDD9"
	}"
}
~~~

| Field Name  | Parameter | Required | Type        | Example | Description                                                  |
| ----------- | --------- | -------- | ----------- | ------- | ------------------------------------------------------------ |
| Code        | code      | true     | Int         | 0       | Gateway return code, return 0 when the call is successful    |
| Information | msg       | true     | String(255) | success | When the code is not 0, the returned information is the cause of the error, for example: parameter format check error |

<aside class="notice">The following Field Name is returned when the code is 0</aside>

| Field Name                     | Parameter        | Required | Type   | Example                          | Description                                                  |
| ------------------------------ | ---------------- | -------- | ------ | -------------------------------- | ------------------------------------------------------------ |
| Merchant Id                    | mch_id           | true     | String | 441649692783284224               | Merchants allocated by BitFS                                 |
| BitFS Trading User ID          | customer_id      | false    | String | 442314630598103040               | Scan code transaction user ID. When the user scans the code to get the order, the Field Name is returned. |
| Merchant Order Number          | out_trade_no     | true     | String | 7faf7e60a92d4afa963b83933a949ecc | The order number within the merchant system, within 32 characters, may contain letters. |
| Random string                  | nonce_str        | true     | String | FEC838C0BEA5468A82E2467DA4F70B8C | Random string                                                |
| Amount Requested               | total_amount     | true     | String | 14.14                            | The amount requested by the merchant for the transaction; when fee_type is fiat currency, the unit is yuan; when fee_type is digital currency, the unit is 1 |
| BitFS Order Number             | transaction_id   | true     | String | 44240523622d4b2ca836176cd88085d3 | Order number generated by BitFS                              |
| Transaction Type               | trade_type       | true     | String | WITHDRAW                         | Deposit: DEPOSIT; Withdraw: WITHDRAW                         |
| Transaction Currency           | fee_type         | true     | String | CNY                              | The transaction currency that initiated the request is divided into fiat currency and digital currency,See the currency list for details |
| Trading Market Data            | tick_price       | true     | String | 7.00                             | The price of BitFS when initiating the request.              |
| Order Amount                   | order_fee        | true     | String | 2.02                             | The number of digital currencies (USDT) actually traded.     |
| Extra Information              | attach           | false    | String | "Recharge of Guangzhou Branch"   | Business extensions                                          |
| Trading Status                 | trade_state      | true     | String | 100                              | 100 :transaction success; 200: transaction failure; 300 :Cancel Transaction |
| Transaction status description | trade_state_desc | true     | String | Cancel Transaction               | A description of the transaction status.                     |
| Sign                           | sign             | true     | String | F752ABD95162A4A95E7C4A5E33DAEDD9 | Sign。                                                       |

### Error Code

| Name                   | Description                           | Reason                                                       | Solution                                                     |
| ---------------------- | ------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| APPKEY_MCHID_NOT_MATCH | machId does not match Merchant AppKey | machId does not match Merchant AppKey                        | Please confirm that appid and mch_id match                   |
| SIGNERROR              | Sign error                            | Parameter Sign result is incorrect                           | Please check whether Sign parameters and methods meet the requirements of Sign algorithm |
| LACK_PARAMS            | Missing parameters                    | Missing required request parameters                          | Please check if the parameters are complete                  |
| SYSTEMERROR            | System error                          | System timeout                                               | The system is abnormal, please call again with the same parameters |
| ORDERNOTEXIST          | Order number does not exist           | This transaction order number does not exist in the query system | The API can only check the merchant order returned by submitting the transaction, please check whether the Merchant Order Number to be queried is correct |

## Order information callback notification interface

### Application Scenario

After the payment is completed, BitFS will send the relevant payment results to the merchant. The merchant needs to receive and process, and return a response according to the document specifications.

### Generalize

- Name:Order information callback notification

- Request Method：POST

- Request Connection：The link is set through the notify_url parameter submitted in the [Charge / Withdraw API]. If the link cannot be accessed, the merchant will not receive BitFS notifications.

- Parameter Format：application/json; charset=utf-8

### Callback Parameter

> request:

~~~java
{
    "mch_id":"441649692783284224",
    "out_trade_no":"7faf7e60a92d4afa963b83933a949ecc",
    "total_amount":"99.99",
    "transaction_id":"44240523622d4b2ca836176cd88085d3",
    "trade_type":"DEPOSIT",
    "fee_type":"CNY",
    "attach":"Recharge of Guangzhou Branch,
    "trade_state":"100",
    "tick_price":"7.00",
    "order_fee":"2.02",
    "trade_state_desc":"Cancel Transaction",
    "nonce_str":"FEC838C0BEA5468A82E2467DA4F70B8C",
    "sign":"F752ABD95162A4A95E7C4A5E33DAEDD9"
}
~~~

| Field Name                     | Parameter        | Required | Type   | Example                          | Description                                                  |
| ------------------------------ | ---------------- | -------- | ------ | -------------------------------- | ------------------------------------------------------------ |
| Merchant Id                    | mch_id           | true     | String | 441649692783284224               | Merchants allocated by BitFS                                 |
| BitFS trading user ID          | customer_id      | false    | String | 442314630598103040               | Scan code transaction user ID. When the user scans the code to get the order, the Field Name is returned. |
| Merchant Order Number          | out_trade_no     | true     | String | 7faf7e60a92d4afa963b83933a949ecc | The order number within the merchant system, within 32 characters, may contain letters. |
| Random string                  | nonce_str        | true     | String | FEC838C0BEA5468A82E2467DA4F70B8C | Random string                                                |
| Amount Requested               | total_amount     | true     | String | 14.14                            | 当fee_type为法币时单位为元；当fee_type为数字货币时单位为 1个 |
| BitFS Order Number             | transaction_id   | true     | String | 44240523622d4b2ca836176cd88085d3 | BitFS生成的订单号                                            |
| Transaction Type               | trade_type       | true     | String | WITHDRAW                         | Deposit: DEPOSIT; Withdraw: WITHDRAW                         |
| Trading Market Data            | tick_price       | true     | String | 7.00                             | The price of BitFS when initiating the request.              |
| Order Amount                   | order_fee        | true     | String | 2.02                             | The number of digital currencies (USDT) actually traded.     |
| Transaction Currency           | fee_type         | true     | String | CNY                              | The transaction currency that initiated the request is divided into fiat currency and digital currency,See the currency list for details |
| Extra Information              | attach           | false    | String | "Recharge of Guangzhou Branch"   | Business extensions                                          |
| Trading Status                 | trade_state      | true     | String | 100                              | 100: the transaction was successful; 200: the transaction failed;300 ：Cancel Transaction |
| Transaction status description | trade_state_desc | true     | String | Cancel Transaction               | A description of the transaction status.                     |
| Sign                           | sign             | true     | String | F752ABD95162A4A95E7C4A5E33DAEDD9 | Sign。                                                       |

### Return parameter


| Field Name  | Parameter   | Required | Type   | Example | Description                                                  |
| ----------- | ----------- | -------- | ------ | ------- | ------------------------------------------------------------ |
| Code        | return_code | true     | String | SUCCESS | SUCCESS/FAIL:'SUCCESS' means the merchant received the notification successfully and verified successfully |
| Information | return_msg  | false    | String | OK      | Information，If not empty, it is an error; Reason:sign failure or parameter format check error |

## Sign Algorithm

### The general steps for sign generation are as follows：



**First Step：**

Set all sent or received data to set M, and sort the parameters of the non-empty parameter values in set M according to the parameter name ASCII code from small to large (lexicographic order),

Use the format of URL key-value pairs (that is, key1 = value1 & key2 = value2 ...) to concatenate into a string param_string.

The following are the Sign rules:

- Sort ASCII codes of parameter names from small to large (lexicographic order);
- If the parameter value is empty, do not participate in Sign;
- Parameter names are case sensitive;
- When the verification call returns or BitFS actively informs Sign, the transmitted sign parameter does not participate in the Sign, and the generated Sign is checked against the sign value.
- The BitFS interface may increase Field Name, and must support the addition of extended Field Name when verifying the Sign



**Second Step:**

Join the key at the end of param_string to get the sign_string string, then perform MD5 operation on sign_string, and then convert all the characters of the obtained string to uppercase to get the sign value sign_value.

Key setting path: BitFS merchant platform-> settings-> merchant private key settings



### Examples

Pass the following parameters：

`"mch_id":"441649692783284224",`

`"out_trade_no":"7faf7e60a92d4afa963b83933a949ecc",`

`"nonce_str":"FEC838C0BEA5468A82E2467DA4F70B8C",`

`"appKey":"a58b139c85adbccf3a4b3a8e83a2bfba",`



**First Step:**

Sort parameters lexicographically：

`param_string=”appKey=a58b139c85adbccf3a4b3a8e83a2bfba&mch_id=441649692783284224&nonce_str=FEC838C0BEA5468A82E2467DA4F70B8C&out_trade_no=7faf7e60a92d4afa963b83933a949ecc“`



**Second Step:**

Splice merchant private key and then perform MD5 operation：

`sign_string="param_string&key=3e678f6e4546f6968c99b52ae4b6659b2cc44d3543ae2fd7538ca48faabfc68e"`

`sign=MD5(sign_string).toUpperCase()="81A3948E5FFEF46F8A2FDE51D8EF3A6D"`



Random number generation algorithm：

The BitFS API interface protocol contains FieldNamenonce_str, which mainly guarantees that Sign is unpredictable. It is recommended to call the random number function to generate and convert the obtained value into a character string.



## Transaction Currency Type

**1.French Currency Type**

| Name | Code |
| ---- | ---- |
| CNY  | CNY  |
| USD  | USD  |





**2.Digital Currency Type**

| Name      | Code   |
| --------- | ------ |
| BTC       | BTC    |
| TetherUSD | USDETH |
| ETH       | ETH    |
