

<!doctype html>
<html>
	  
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="images/favicon-ddccfcdf.ico" rel="icon" type="image/ico" />
    <title>BitFS API 接口文档</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
  background-color: #272822;
}
.highlight .nn {
  color: #ffffff;
  background-color: #272822;
}
.highlight .nl {
  color: #ffffff;
  background-color: #272822;
}
.highlight .ni {
  color: #ffffff;
  background-color: #272822;
}
.highlight .bp {
  color: #ffffff;
  background-color: #272822;
}
.highlight .vg {
  color: #ffffff;
  background-color: #272822;
}
.highlight .vi {
  color: #ffffff;
  background-color: #272822;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
  background-color: #272822;
}
.highlight .w {
  color: #ffffff;
  background-color: #272822;
}
.highlight {
  color: #ffffff;
  background-color: #272822;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
  background-color: #272822;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
	
	<style>
		#lang_box:hover{ border-color:#FCB054}
    </style>

    <link href="stylesheets/screen-5aaa3f53.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-c427a123.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-c5541673.js"></script>
  </head>

  <body class="index" data-languages="[&quot;json&quot;]">
    <header>
      <div class="flex_box">
      <a href="http://www.bitfs.com" style="display: block;">
      <img src="images/logo-54d80710.png" class="logo" alt="" />
      </a>
      </div>
      <a href="http://bitfs.github.io/docs/en" class="lang"  id="lang_box" style="display: block;">English</a>
    </header>

    <div class="toc-wrapper">
 
        <div class="lang-selector">
              <a href="#" data-language-name="json">json</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#5ea2e0cde2" class="toc-h1 toc-link" data-title="简介">简介</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#0cc510e609" class="toc-h2 toc-link" data-title="关于我们">关于我们</a>
                  </li>
                  <li>
                    <a href="#d9db02d07a" class="toc-h2 toc-link" data-title="更新">更新</a>
                  </li>
                  <li>
                    <a href="#152d3db758" class="toc-h2 toc-link" data-title="联系我们">联系我们</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#2d07d50c97" class="toc-h1 toc-link" data-title="接入说明">接入说明</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#76c93fd375" class="toc-h2 toc-link" data-title="场景介绍">场景介绍</a>
                  </li>
                  <li>
                    <a href="#b8c7827354" class="toc-h2 toc-link" data-title="接口开发流程">接口开发流程</a>
                  </li>
                  <li>
                    <a href="#bb3cb157dd" class="toc-h2 toc-link" data-title="业务流程">业务流程</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#d535c9fbeb" class="toc-h1 toc-link" data-title="交易列表">交易列表</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#bd2cf3e047" class="toc-h2 toc-link" data-title="法币币种充值">法币币种充值</a>
                  </li>
                  <li>
                    <a href="#3608dfcdeb" class="toc-h2 toc-link" data-title="法币币种提币">法币币种提币</a>
                  </li>
                  <li>
                    <a href="#e7dca8d0a5" class="toc-h2 toc-link" data-title="数字货币币种充值">数字货币币种充值</a>
                  </li>
                  <li>
                    <a href="#4ae2658fb7" class="toc-h2 toc-link" data-title="数字货币币种提币">数字货币币种提币</a>
                  </li>
                  <li>
                    <a href="#b384fd01ff" class="toc-h2 toc-link" data-title="回调通知"><strong>回调通知</strong></a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#87f208b1e6" class="toc-h1 toc-link" data-title="查询列表">查询列表</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#6b7ef9ef44" class="toc-h2 toc-link" data-title="查询法币币种">查询法币币种</a>
                  </li>
                  <li>
                    <a href="#7c3640e1be" class="toc-h2 toc-link" data-title="查询数字货币币种">查询数字货币币种</a>
                  </li>
                  <li>
                    <a href="#2adf2aeac3" class="toc-h2 toc-link" data-title="查询商户账户余额">查询商户账户余额</a>
                  </li>
                  <li>
                    <a href="#90376e83a0" class="toc-h2 toc-link" data-title="查询订单">查询订单</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#54709db3b7" class="toc-h1 toc-link" data-title="参考资料">参考资料</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#d6a9971a56" class="toc-h2 toc-link" data-title="交易货币类型">交易货币类型</a>
                  </li>
                  <li>
                    <a href="#7b81b8ce22" class="toc-h2 toc-link" data-title="签名算法">签名算法</a>
                  </li>
              </ul>
          </li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='5ea2e0cde2'>简介</h1><h2 id='0cc510e609'>关于我们</h2>
<p>欢迎使用BitFS!</p>

<p>BitFS致力打造全新支付方式，提供稳定、安全、可靠的数字货币支付通道。全球化支付，实时提现模式，提升商家的服务效率和营收，降低运营成本，使消费者的体验更便捷、更愉悦、更完美。</p>

<p>本文档是官方唯一指定API文档。您可以在右侧的阴影区域查看代码示例。</p>
<h2 id='d9db02d07a'>更新</h2>
<p>关于API的更新情况，BitFS会发布在帮助中心的API公告处。</p>
<h2 id='152d3db758'>联系我们</h2>
<p>使用过程中如有问题或建议，请通过以下方式联系我们：</p>

<ul>
<li><p>Email：service@bitfs.com</p></li>
<li><p>进入BitFS官网点击右下角【支持】按钮联系我们</p></li>
</ul>
<h1 id='2d07d50c97'>接入说明</h1><h2 id='76c93fd375'>场景介绍</h2>
<p>BitFS支付是指商户在移动端或PC端网页展示商品或服务，用户在前述页面确认使用BitFS支付时，商户发起本服务呼起[BitFS] App进行支付或者使用[BitFS] App扫码支付。</p>

<p>主要用于触屏版的手机浏览器请求BitFS支付的场景和PC端的浏览器发起订单用App扫码支付的场景。可以方便的从浏览器唤起BitFS支付和扫码支付。</p>

<p>申请入口：登录BitFS官网--&gt;企业用户--&gt;联系销售--&gt;平台接入申请</p>
<h2 id='b8c7827354'>接口开发流程</h2>
<p><img src="images/payment/development-c0872872.png" alt="" /></p>

<p><strong>流程说明：</strong></p>

<p>1、用户在商户侧完成下单，使用BitFS支付进行支付</p>

<p>2、由商户后台向BitFS支付发起下单请求。注：交易类型trade_type=“DEPOSIT”</p>

<p>3、商户端保存订单信息</p>

<p>4、法币/数字货币充值下单接口返回支付相关参数给商户后台</p>

<p>5、BitFS返回网关中间页url</p>

<p>6，7，8、如支付跳转url（参数名“pay_url”），商户通过pay_url调起BitFS支付中间页</p>

<p>9，10、中间页进行支付权限的校验及安全检查</p>

<p>11，12、用户扫码获取BitFS支付订单信息进行支付</p>

<p>13，14、如支付成功，商户后台会接收到BitFS后台的异步通知，并返回接收结果</p>

<p>15、用户在BitFS支付app完成支付或取消支付,返回支付结果页面</p>

<p>16、商户在展示页面，引导用户主动发起支付结果的查询</p>

<p>17,18、商户后台判断是否接到BitFS后台的支付结果通知，如没有，后台调用BitFS的订单查询接口确认订单状态</p>

<p>20，21、展示最终的订单支付结果给用户</p>
<h2 id='bb3cb157dd'>业务流程</h2>
<p><strong>商户方</strong></p>

<p>通过BitFS支付可以实现在浏览器（如谷歌浏览器、百度浏览器、UC浏览器等）中使用BitFS支付的场景。</p>

<p><strong>用户方</strong></p>

<p>1、用户从浏览器的站点导航进入商户网页，用户挑选需购买的商品，选择BitFS支付发起购买流程。</p>

<p><img src="images/payment/toBuy-31661a11.jpg" alt="" /></p>

<p>2、移动端直接通过App确认交易，输入支付密码；PC端需要下载BitFS的App，然后进行扫码获取订单信息确认交易，输入支付密码。</p>

<p><img src="images/payment/payment-17835e25.png" alt="" /></p>

<p>3、支付成功，用户收到支付凭证，同时商户后台收到支付成功的通知。
<img src="images/payment/payOk-41615072.png" alt="" /></p>
<h1 id='d535c9fbeb'>交易列表</h1><h2 id='bd2cf3e047'>法币币种充值</h2><h3 id='e106e7a0f4'>应用场景</h3>
<p>BitFS支付是指商户在PC端或者移动端网页展示商品或服务，用户在前述页面确认使用BitFS支付时，商户发起本服务呼起【BitFS】APP进行快速支付。 主要用于智能手机浏览器请求BitFS支付的场景。可以方便地从外部浏览器唤起BitFS支付。当商户商品以法币标价时调用本接口。</p>
<h3 id='44afead4bb'>概括</h3>
<ul>
<li><p>API名称：充值接口----法币标价</p></li>
<li><p>请求方式：HTTP POST</p></li>
<li><p>请求URL：pay/v1/unifiedorder</p></li>
</ul>
<h3 id='1f9ac54b15'>请求参数</h3>
<blockquote>
<p>request:</p>
</blockquote>
<div class="highlight"><pre class="highlight java tab-java"><code><span class="o">{</span>
    <span class="s">"mch_id"</span><span class="o">:</span><span class="s">"441649692783284224"</span><span class="o">,</span>
    <span class="s">"device_type"</span><span class="o">:</span><span class="s">"PC"</span><span class="o">,</span>
    <span class="s">"nonce_str"</span><span class="o">:</span><span class="s">"FEC838C0BEA5468A82E2467DA4F70B8C"</span><span class="o">,</span>
    <span class="s">"local"</span><span class="o">:</span><span class="s">"en_US"</span><span class="o">,</span>
    <span class="s">"out_trade_no"</span><span class="o">:</span><span class="s">"7faf7e60a92d4afa963b83933a949ecc"</span><span class="o">,</span>
    <span class="s">"spbill_create_ip"</span><span class="o">:</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="o">,</span>
    <span class="s">"fee_type"</span><span class="o">:</span><span class="s">"CNY"</span><span class="o">,</span>
    <span class="s">"trade_type"</span><span class="o">:</span><span class="s">"DEPOSIT"</span><span class="o">,</span>
    <span class="s">"body"</span><span class="o">:</span><span class="s">"小游戏-点券充值"</span><span class="o">,</span>
    <span class="s">"total_amount"</span><span class="o">:</span><span class="s">"100"</span><span class="o">,</span>
    <span class="s">"notify_url"</span><span class="o">:</span><span class="s">"https://www.baidu.com"</span><span class="o">,</span>
    <span class="s">"timestamp"</span><span class="o">:</span><span class="mi">1585471277677</span><span class="o">,</span>
    <span class="s">"appKey"</span><span class="o">:</span><span class="s">"fc798420836184e33c042de1caa2814a"</span><span class="o">,</span>
    <span class="s">"sign"</span><span class="o">:</span><span class="s">"F752ABD95162A4A95E7C4A5E33DAEDD9"</span>
<span class="o">}</span>
</code></pre></div>
<table><thead>
<tr>
<th style="text-align: left">变量名</th>
<th>类型</th>
<th style="text-align: left">必填</th>
<th style="text-align: left">示例值</th>
<th style="text-align: left">描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">mch_id</td>
<td>String</td>
<td style="text-align: left">true</td>
<td style="text-align: left">441649692783284224</td>
<td style="text-align: left">BitFS分配的商户ID</td>
</tr>
<tr>
<td style="text-align: left">device_type</td>
<td>String</td>
<td style="text-align: left">true</td>
<td style="text-align: left">PC</td>
<td style="text-align: left">设备类型：发起请求的设备来自移动端还是PC端</td>
</tr>
<tr>
<td style="text-align: left">attach</td>
<td>String</td>
<td style="text-align: left">false</td>
<td style="text-align: left">广州总店</td>
<td style="text-align: left">附加数据：在查询API和支付通知中原样返回，该字段主要用于商户携带订单的自定义数据</td>
</tr>
<tr>
<td style="text-align: left">nonce_str</td>
<td>String</td>
<td style="text-align: left">true</td>
<td style="text-align: left">FEC838C0BEA5468A82E2467DA4F70B8C</td>
<td style="text-align: left">随机字符串：不长于32位</td>
</tr>
<tr>
<td style="text-align: left">local</td>
<td>String</td>
<td style="text-align: left">true</td>
<td style="text-align: left">en_US</td>
<td style="text-align: left">本地语言：本地网络语言按国际标准填写</td>
</tr>
<tr>
<td style="text-align: left">out_trade_no</td>
<td>String</td>
<td style="text-align: left">true</td>
<td style="text-align: left">7faf7e60a92d4afa963b83933a949ecc</td>
<td style="text-align: left">商户系统内部订单号：要求32个字符内，只能是数字、大小写字母且在同一个商户号下唯一</td>
</tr>
<tr>
<td style="text-align: left">spbill_create_ip</td>
<td>String</td>
<td style="text-align: left">true</td>
<td style="text-align: left">127.0.0.1</td>
<td style="text-align: left">终端IP：必须传正确的用户端IP,支持ipv4、ipv6格式</td>
</tr>
<tr>
<td style="text-align: left">sign_type</td>
<td>String</td>
<td style="text-align: left">false</td>
<td style="text-align: left">MD5</td>
<td style="text-align: left">签名类型：默认为MD5</td>
</tr>
<tr>
<td style="text-align: left">fee_type</td>
<td>String</td>
<td style="text-align: left">true</td>
<td style="text-align: left">CNY</td>
<td style="text-align: left">货币类型：符合ISO 4217标准的三位字母代码，<a href="#d6a9971a56">详见法币列表</a></td>
</tr>
<tr>
<td style="text-align: left">trade_type</td>
<td>String</td>
<td style="text-align: left">true</td>
<td style="text-align: left">DEPOSIT</td>
<td style="text-align: left">交易类型：充币：DEPOSIT ； 提币：WITHDRAW</td>
</tr>
<tr>
<td style="text-align: left">body</td>
<td>String</td>
<td style="text-align: left">true</td>
<td style="text-align: left">“小游戏-点券充值”</td>
<td style="text-align: left">商品简单描述：该字段须严格按照规范传递</td>
</tr>
<tr>
<td style="text-align: left">total_amount</td>
<td>BigDecimal</td>
<td style="text-align: left">true</td>
<td style="text-align: left">100</td>
<td style="text-align: left">订单总金额</td>
</tr>
<tr>
<td style="text-align: left">notify_url</td>
<td>String</td>
<td style="text-align: left">true</td>
<td style="text-align: left">https://www.baidu.com</td>
<td style="text-align: left">结果通知地址：接收BitFS支付异步通知回调地址，详情参考<a href="#b384fd01ff">回调通知</a></td>
</tr>
<tr>
<td style="text-align: left">timestamp</td>
<td>String</td>
<td style="text-align: left">true</td>
<td style="text-align: left">1585471277677</td>
<td style="text-align: left">发起订单时的时间毫秒数</td>
</tr>
<tr>
<td style="text-align: left">appKey</td>
<td>String</td>
<td style="text-align: left">true</td>
<td style="text-align: left">1e75e94982f80bd1f219ea807af96bd5</td>
<td style="text-align: left">BitFS分配的商户appKey</td>
</tr>
<tr>
<td style="text-align: left">sign</td>
<td>String</td>
<td style="text-align: left">true</td>
<td style="text-align: left">13F9609AA53A8AEBED5516EE8696A995</td>
<td style="text-align: left">签名，<a href="#7b81b8ce22">详见签名生成算法</a></td>
</tr>
</tbody></table>
<h3 id='3763e2bd8c'>返回结果</h3>
<blockquote>
<p>response:</p>
</blockquote>
<div class="highlight"><pre class="highlight java tab-java"><code><span class="o">{</span>
    <span class="s">"code"</span><span class="o">:</span> <span class="mi">0</span><span class="o">,</span>
    <span class="s">"msg"</span><span class="o">:</span> <span class="s">"請求成功"</span><span class="o">,</span>
    <span class="s">"result"</span><span class="o">:</span> <span class="s">"{
        "</span><span class="n">pay_url</span><span class="s">":"</span><span class="nl">http:</span><span class="c1">//174.139.156.39:8866/#/?id=439535840037699584",</span>
        <span class="s">"mch_id"</span><span class="o">:</span><span class="s">"441649692783284224"</span><span class="o">,</span>
        <span class="s">"transaction_id"</span><span class="o">:</span><span class="s">"330183791717372699"</span><span class="o">,</span>
        <span class="s">"trade_type"</span><span class="o">:</span><span class="s">"DEPOSIT"</span><span class="o">,</span>
        <span class="s">"nonce_str"</span><span class="o">:</span><span class="s">"FEC838C0BEA5468A82E2467DA4F70B8C"</span><span class="o">,</span>
        <span class="s">"sign"</span><span class="o">:</span><span class="s">"F752ABD95162A4A95E7C4A5E33DAEDD9"</span>
    <span class="o">}</span><span class="err">"</span>
<span class="o">}</span>
</code></pre></div>
<table><thead>
<tr>
<th>变量名</th>
<th>必填</th>
<th>类型</th>
<th>示例值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>true</td>
<td>Int</td>
<td>0</td>
<td>网关返回状态码：调用成功时返回0</td>
</tr>
<tr>
<td>msg</td>
<td>true</td>
<td>String(255)</td>
<td>success</td>
<td>返回信息：当code不为0时返回信息为错误原因 ，例如:签名失败;参数格式校验错误</td>
</tr>
</tbody></table>

<aside class="notice">以下字段在code为0时有返回</aside>

<table><thead>
<tr>
<th style="text-align: left">变量名</th>
<th style="text-align: left">必填</th>
<th>类型</th>
<th>示例值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">pay_url</td>
<td style="text-align: left">true</td>
<td>String</td>
<td>http://174.139.156.39:8844/#/currency/currinformation</td>
<td>支付跳转链接：pay_url为拉起BitFS支付中间页面可通过扫该页面拉起BitFS的App支付界面完成支付，有效时间5分钟</td>
</tr>
<tr>
<td style="text-align: left">mch_id</td>
<td style="text-align: left">true</td>
<td>String</td>
<td>441649692783284224</td>
<td>BitFS分配给商户的id</td>
</tr>
<tr>
<td style="text-align: left">transaction_id</td>
<td style="text-align: left">true</td>
<td>String</td>
<td>330183791717372699</td>
<td>网关订单ID</td>
</tr>
<tr>
<td style="text-align: left">trade_type</td>
<td style="text-align: left">true</td>
<td>String</td>
<td>DEPOSIT</td>
<td>交易类型：充币:DEPOSIT； 提币:WITHDRAW</td>
</tr>
<tr>
<td style="text-align: left">nonce_str</td>
<td style="text-align: left">true</td>
<td>String</td>
<td>FEC838C0BEA5468A82E2467DA4F70B8C</td>
<td>BitFS返回的随机字符串</td>
</tr>
<tr>
<td style="text-align: left">sign</td>
<td style="text-align: left">true</td>
<td>String</td>
<td>F752ABD95162A4A95E7C4A5E33DAEDD9</td>
<td>BitFS返回的签名</td>
</tr>
</tbody></table>
<h3 id='e08c1d4f9a'>错误码</h3>
<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
<th>原因</th>
<th>解决方案</th>
</tr>
</thead><tbody>
<tr>
<td>APPKEY_MCHID_NOT_MATCH</td>
<td>商户machId与商户appkey不匹配</td>
<td>商户machId与商户appkey不匹配</td>
<td>请确认appid和mch_id是否匹配</td>
</tr>
<tr>
<td>SIGNERROR</td>
<td>签名错误</td>
<td>参数签名结果不正确</td>
<td>请检查签名参数和方法是否都符合签名算法要求</td>
</tr>
<tr>
<td>OUT_TRADE_NO_USED</td>
<td>商户订单号重复</td>
<td>同一笔交易不能多次提交</td>
<td>请核实商户订单号是否重复提交</td>
</tr>
<tr>
<td>LACK_PARAMS</td>
<td>缺少参数</td>
<td>缺少必要的请求参数</td>
<td>请检查参数是否齐全</td>
</tr>
<tr>
<td>SYSTEMERROR</td>
<td>系统错误</td>
<td>系统超时</td>
<td>系统异常，请用相同参数重新调用</td>
</tr>
<tr>
<td>COIN_NOT_EXIST</td>
<td>币种不支持</td>
<td>请求的币种不支持</td>
<td>请参考<a href="#d6a9971a56">交易货币类型</a>上传正确的币种</td>
</tr>
<tr>
<td>ACCOUNT_NOT_EXIST</td>
<td>账户不存在</td>
<td>商户账户不存在</td>
<td>请对商户账户信息是否正确</td>
</tr>
</tbody></table>
<h2 id='3608dfcdeb'>法币币种提币</h2><h3 id='e106e7a0f4-2'>应用场景</h3>
<p>当BitFS用户在商户系统发起提现时，商户系统调用本接口可以方便地使用商户账户向用户转账，BitFS以实时行情汇率将法币金额兑换成USDT。</p>
<h3 id='44afead4bb-2'>概括</h3>
<ul>
<li><p>API名称：提币接口-法币接口</p></li>
<li><p>请求方式：HTTP POST</p></li>
<li><p>请求URL：pay/v1/withdraw</p></li>
</ul>
<h3 id='1f9ac54b15-2'>请求参数</h3>
<blockquote>
<p>request:</p>
</blockquote>
<div class="highlight"><pre class="highlight java tab-java"><code><span class="o">{</span>
    <span class="s">"mch_id"</span><span class="o">:</span><span class="s">"441649692783284224"</span><span class="o">,</span>
    <span class="s">"area_code"</span><span class="o">:</span><span class="s">"0086"</span><span class="o">,</span>
    <span class="s">"get_account"</span><span class="o">:</span><span class="s">"13899996666"</span><span class="o">,</span>
    <span class="s">"nonce_str"</span><span class="o">:</span><span class="s">"FEC838C0BEA5468A82E2467DA4F70B8C"</span><span class="o">,</span>
    <span class="s">"out_trade_no"</span><span class="o">:</span><span class="s">"7faf7e60a92d4afa963b83933a949ecc"</span><span class="o">,</span>
    <span class="s">"spbill_create_ip"</span><span class="o">:</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="o">,</span>
    <span class="s">"fee_type"</span><span class="o">:</span><span class="s">"CNY"</span><span class="o">,</span>
    <span class="s">"trade_type"</span><span class="o">:</span><span class="s">"WITHDRAW"</span><span class="o">,</span>
    <span class="s">"total_amount"</span><span class="o">:</span><span class="s">"100"</span><span class="o">,</span>
    <span class="s">"notify_url"</span><span class="o">:</span><span class="s">"https://www.baidu.com"</span><span class="o">,</span>
    <span class="s">"timestamp"</span><span class="o">:</span><span class="mi">1585471277677</span><span class="o">,</span>
    <span class="s">"appKey"</span><span class="o">:</span><span class="s">"fc798420836184e33c042de1caa2814a"</span><span class="o">,</span>
    <span class="s">"sign"</span><span class="o">:</span><span class="s">"F752ABD95162A4A95E7C4A5E33DAEDD9"</span>
<span class="o">}</span>
</code></pre></div>
<table><thead>
<tr>
<th>变量名</th>
<th>类型</th>
<th>必填</th>
<th>示例值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>mch_id</td>
<td>String</td>
<td>true</td>
<td>441649692783284224</td>
<td>BitFS分配的商户ID</td>
</tr>
<tr>
<td>area_code</td>
<td>String</td>
<td>true</td>
<td>0086</td>
<td>提币账户归属地</td>
</tr>
<tr>
<td>get_account</td>
<td>String</td>
<td>true</td>
<td>13899996666</td>
<td>提币账户：发起提币的账户。</td>
</tr>
<tr>
<td>attach</td>
<td>String</td>
<td>false</td>
<td>普通提币</td>
<td>附加数据：在查询API和支付通知中原样返回，该字段主要用于商户携带订单的自定义数据。</td>
</tr>
<tr>
<td>nonce_str</td>
<td>String</td>
<td>true</td>
<td>FEC838C0BEA5468A82E2467DA4F70B8C</td>
<td>随机字符串：不长于32位。</td>
</tr>
<tr>
<td>out_trade_no</td>
<td>String</td>
<td>true</td>
<td>7faf7e60a92d4afa963b83933a949ecc</td>
<td>商户系统内部的订单号：32个字符内、可包含字母。</td>
</tr>
<tr>
<td>sign_type</td>
<td>String</td>
<td>true</td>
<td>MD5</td>
<td>签名类型：默认为MD5</td>
</tr>
<tr>
<td>spbill_create_ip</td>
<td>String</td>
<td>true</td>
<td>127.0.0.1</td>
<td>终端IP：必须传正确的用户端IP,支持ipv4、ipv6格式</td>
</tr>
<tr>
<td>fee_type</td>
<td>String</td>
<td>true</td>
<td>CNY</td>
<td>货币类型：符合ISO 4217标准的三位字母代码，<a href="#d6a9971a56">详见法币列表</a></td>
</tr>
<tr>
<td>trade_type</td>
<td>String</td>
<td>true</td>
<td>WITHDRAW</td>
<td>交易类型：充币:DEPOSIT;提币:WITHDRAW</td>
</tr>
<tr>
<td>total_amount</td>
<td>BigDecimal</td>
<td>true</td>
<td>1000</td>
<td>订单总金额</td>
</tr>
<tr>
<td>notify_url</td>
<td>String</td>
<td>true</td>
<td>https://www.baidu.com</td>
<td>结果通知地址：接收BitFS支付异步通知回调地址，详情参考<a href="#b384fd01ff">回调通知</a></td>
</tr>
<tr>
<td>timestamp</td>
<td>String</td>
<td>true</td>
<td>1585471277677</td>
<td>时间戳：发起订单时的时间毫秒数</td>
</tr>
<tr>
<td>appKey</td>
<td>String</td>
<td>true</td>
<td>1e75e94982f80bd1f219ea807af96bd5</td>
<td>BitFS分配的商户appKey</td>
</tr>
<tr>
<td>sign</td>
<td>String</td>
<td>true</td>
<td>13F9609AA53A8AEBED5516EE8696A995</td>
<td>签名，<a href="#7b81b8ce22">详见签名生成算法</a>，默认MD5</td>
</tr>
</tbody></table>
<h3 id='3763e2bd8c-2'>返回结果</h3>
<blockquote>
<p>response</p>
</blockquote>
<div class="highlight"><pre class="highlight java tab-java"><code><span class="o">{</span>
    <span class="s">"code"</span><span class="o">:</span> <span class="mi">0</span><span class="o">,</span>
    <span class="s">"msg"</span><span class="o">:</span> <span class="s">"請求成功"</span><span class="o">,</span>
    <span class="s">"result"</span><span class="o">:</span> <span class="s">"{
        "</span><span class="n">mch_id</span><span class="s">":"</span><span class="mi">441649692783284224</span><span class="s">",
        "</span><span class="n">transaction_id</span><span class="s">":"</span><span class="mi">330183791717372699</span><span class="s">",
        "</span><span class="n">trade_type</span><span class="s">":"</span><span class="no">DEPOSIT</span><span class="s">",
        "</span><span class="n">nonce_str</span><span class="s">":"</span><span class="no">FEC838C0BEA5468A82E2467DA4F70B8C</span><span class="s">",
        "</span><span class="n">sign</span><span class="s">":"</span><span class="no">F752ABD95162A4A95E7C4A5E33DAEDD9</span><span class="s">"
    }"</span>
<span class="o">}</span>
</code></pre></div>
<table><thead>
<tr>
<th>变量名</th>
<th>必填</th>
<th>类型</th>
<th>示例值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>true</td>
<td>Int</td>
<td>0</td>
<td>网关返回状态码：调用成功时返回0</td>
</tr>
<tr>
<td>msg</td>
<td>true</td>
<td>String(255)</td>
<td>success</td>
<td>返回信息：当code不为0时返回信息为错误原因 ，例如 :签名失败  参数格式校验错误</td>
</tr>
</tbody></table>

<aside class="notice">以下字段在code为0时有返回</aside>

<table><thead>
<tr>
<th>变量</th>
<th>必填</th>
<th>类型</th>
<th>示例值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>mch_id</td>
<td>true</td>
<td>String</td>
<td>441649692783284224</td>
<td>BitFS分配给商户的ID</td>
</tr>
<tr>
<td>transaction_id</td>
<td>true</td>
<td>String</td>
<td>330183791717372699</td>
<td>网关订单ID</td>
</tr>
<tr>
<td>trade_type</td>
<td>true</td>
<td>String</td>
<td>WITHDRAW</td>
<td>交易类型：充币:DEPOSIT ;提币:WITHDRAW</td>
</tr>
<tr>
<td>nonce_str</td>
<td>true</td>
<td>String</td>
<td>FEC838C0BEA5468A82E2467DA4F70B8C</td>
<td>BitFS返回的随机字符串</td>
</tr>
<tr>
<td>sign</td>
<td>true</td>
<td>String</td>
<td>F752ABD95162A4A95E7C4A5E33DAEDD9</td>
<td>BitFS返回的签名</td>
</tr>
</tbody></table>
<h3 id='e08c1d4f9a-2'>错误码</h3>
<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
<th>原因</th>
<th>解决方案</th>
</tr>
</thead><tbody>
<tr>
<td>APPKEY_MCHID_NOT_MATCH</td>
<td>商户machId与商户appkey不匹配</td>
<td>商户machId与商户appkey不匹配</td>
<td>请确认appid和mch_id是否匹配</td>
</tr>
<tr>
<td>SIGNERROR</td>
<td>签名错误</td>
<td>参数签名结果不正确</td>
<td>请检查签名参数和方法是否都符合签名算法要求</td>
</tr>
<tr>
<td>OUT_TRADE_NO_USED</td>
<td>商户订单号重复</td>
<td>同一笔交易不能多次提交</td>
<td>请核实商户订单号是否重复提交</td>
</tr>
<tr>
<td>LACK_PARAMS</td>
<td>缺少参数</td>
<td>缺少必要的请求参数</td>
<td>请检查参数是否齐全</td>
</tr>
<tr>
<td>SYSTEMERROR</td>
<td>系统错误</td>
<td>系统超时</td>
<td>系统异常，请用相同参数重新调用</td>
</tr>
<tr>
<td>COIN_NOT_EXIST</td>
<td>币种不支持</td>
<td>请求的币种不支持</td>
<td>请参考<a href="#d6a9971a56">币种列表</a>上传正确的币种</td>
</tr>
<tr>
<td>TRANSFER_ACCOUNT_NOT_EXIST</td>
<td>转账账户不存在</td>
<td>商户账户不存在</td>
<td>请对商户账户信息是否正确</td>
</tr>
<tr>
<td>YOLLON_NOT_EXIST</td>
<td>收款账户不存在</td>
<td>提币用户Bitfs账户不存在</td>
<td>请确保提币账户为bitfs用户</td>
</tr>
</tbody></table>
<h2 id='e7dca8d0a5'>数字货币币种充值</h2><h3 id='e106e7a0f4-3'>应用场景</h3>
<p>BitFS 支付是指商户在PC端或者移动端网页展示商品或服务，用户在前述页面确认使用BitFS 支付时，商户发起本服务呼起BitFS APP进行快速支付。 主要用于智能手机浏览器请求BitFS 支付的场景。可以方便地从外部浏览器唤起BitFS 支付。当商户商品以数字货币标价时调用本接口。</p>
<h3 id='44afead4bb-3'>概括</h3>
<ul>
<li><p>API名称：充值接口-数字货币标价</p></li>
<li><p>请求方式：HTTP POST</p></li>
<li><p>请求URL：pay/v1/coinunifiedorder</p></li>
</ul>
<h3 id='1f9ac54b15-3'>请求参数</h3>
<blockquote>
<p>request:</p>
</blockquote>
<div class="highlight"><pre class="highlight java tab-java"><code><span class="o">{</span>
    <span class="s">"mch_id"</span><span class="o">:</span><span class="s">"441649692783284224"</span><span class="o">,</span>
    <span class="s">"device_type"</span><span class="o">:</span><span class="s">"PC"</span><span class="o">,</span>
    <span class="s">"nonce_str"</span><span class="o">:</span><span class="s">"FEC838C0BEA5468A82E2467DA4F70B8C"</span><span class="o">,</span>
    <span class="s">"local"</span><span class="o">:</span><span class="s">"en_US"</span><span class="o">,</span>
    <span class="s">"out_trade_no"</span><span class="o">:</span><span class="s">"7faf7e60a92d4afa963b83933a949ecc"</span><span class="o">,</span>
    <span class="s">"spbill_create_ip"</span><span class="o">:</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="o">,</span>
    <span class="s">"fee_type"</span><span class="o">:</span><span class="s">"BTC"</span><span class="o">,</span>
    <span class="s">"trade_type"</span><span class="o">:</span><span class="s">"DEPOSIT"</span><span class="o">,</span>
    <span class="s">"body"</span><span class="o">:</span><span class="s">"小游戏-点券充值"</span><span class="o">,</span>
    <span class="s">"total_amount"</span><span class="o">:</span><span class="s">"1000"</span><span class="o">,</span>
    <span class="s">"notify_url"</span><span class="o">:</span><span class="s">"https://www.baidu.com"</span><span class="o">,</span>
    <span class="s">"timestamp"</span><span class="o">:</span><span class="mi">1585471277677</span><span class="o">,</span>
    <span class="s">"appKey"</span><span class="o">:</span><span class="s">"fc798420836184e33c042de1caa2814a"</span><span class="o">,</span>
    <span class="s">"sign"</span><span class="o">:</span><span class="s">"F752ABD95162A4A95E7C4A5E33DAEDD9"</span>
<span class="o">}</span>
</code></pre></div>
<table><thead>
<tr>
<th>变量名</th>
<th>类型</th>
<th>必填</th>
<th>示例值</th>
</tr>
</thead><tbody>
<tr>
<td>mch_id</td>
<td>String</td>
<td>true</td>
<td>441649692783284224</td>
</tr>
<tr>
<td>device_type</td>
<td>String</td>
<td>true</td>
<td>PC</td>
</tr>
<tr>
<td>attach</td>
<td>String</td>
<td>false</td>
<td>广州总店</td>
</tr>
<tr>
<td>nonce_str</td>
<td>String</td>
<td>true</td>
<td>FEC838C0BEA5468A82E2467DA4F70B8C</td>
</tr>
<tr>
<td>local</td>
<td>String</td>
<td>true</td>
<td>en_US</td>
</tr>
<tr>
<td>out_trade_no</td>
<td>String</td>
<td>true</td>
<td>7faf7e60a92d4afa963b83933a949ecc</td>
</tr>
<tr>
<td>transaction_id</td>
<td>String</td>
<td>true</td>
<td>330183791717372699</td>
</tr>
<tr>
<td>sign_type</td>
<td>String</td>
<td>false</td>
<td>MD5</td>
</tr>
<tr>
<td>spbill_create_ip</td>
<td>String</td>
<td>true</td>
<td>127.0.0.1</td>
</tr>
<tr>
<td>fee_type</td>
<td>String</td>
<td>true</td>
<td>BTC</td>
</tr>
<tr>
<td>trade_type</td>
<td>String</td>
<td>true</td>
<td>DEPOSIT</td>
</tr>
<tr>
<td>body</td>
<td>String</td>
<td>true</td>
<td>“小游戏-点券充值”</td>
</tr>
<tr>
<td>total_amount</td>
<td>BigDecimal</td>
<td>true</td>
<td>1000</td>
</tr>
<tr>
<td>notify_url</td>
<td>String</td>
<td>true</td>
<td>https://www.baidu.com</td>
</tr>
<tr>
<td>timestamp</td>
<td>String</td>
<td>true</td>
<td>1585471277677</td>
</tr>
<tr>
<td>appKey</td>
<td>String</td>
<td>true</td>
<td>1e75e94982f80bd1f219ea807af96bd5</td>
</tr>
<tr>
<td>sign</td>
<td>String</td>
<td>true</td>
<td>13F9609AA53A8AEBED5516EE8696A995</td>
</tr>
</tbody></table>
<h3 id='3763e2bd8c-3'>返回结果</h3><div class="highlight"><pre class="highlight java tab-java"><code><span class="o">{</span>
    <span class="s">"code"</span><span class="o">:</span> <span class="mi">0</span><span class="o">,</span>
    <span class="s">"msg"</span><span class="o">:</span> <span class="s">"請求成功"</span><span class="o">,</span>
    <span class="s">"result"</span><span class="o">:</span> <span class="s">"{
        "</span><span class="n">pay_url</span><span class="s">":"</span><span class="nl">http:</span><span class="c1">//174.139.156.39:8866/#/?id=439535840037699584",</span>
        <span class="s">"mch_id"</span><span class="o">:</span><span class="s">"441649692783284224"</span><span class="o">,</span>
        <span class="s">"transaction_id"</span><span class="o">:</span><span class="s">"330183791717372699"</span><span class="o">,</span>
        <span class="s">"trade_type"</span><span class="o">:</span><span class="s">"DEPOSIT"</span><span class="o">,</span>
        <span class="s">"nonce_str"</span><span class="o">:</span><span class="s">"FEC838C0BEA5468A82E2467DA4F70B8C"</span><span class="o">,</span>
        <span class="s">"sign"</span><span class="o">:</span><span class="s">"F752ABD95162A4A95E7C4A5E33DAEDD9"</span>
    <span class="o">}</span><span class="err">"</span>

<span class="o">}</span>
</code></pre></div>
<table><thead>
<tr>
<th>变量名</th>
<th>必填</th>
<th>类型</th>
<th>示例值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>true</td>
<td>Int</td>
<td>0</td>
<td>网关返回状态码：调用成功时返回0</td>
</tr>
<tr>
<td>msg</td>
<td>true</td>
<td>String(255)</td>
<td>success</td>
<td>返回信息：当code不为0时返回信息为错误原因 ，例如:签名失败；参数格式校验错误</td>
</tr>
</tbody></table>

<aside class="notice">以下字段在code为0时有返回</aside>

<table><thead>
<tr>
<th>变量</th>
<th>必填</th>
<th>类型</th>
<th>示例值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>pay_url</td>
<td>true</td>
<td>String</td>
<td>http://174.139.156.39:8844/#/currency/currinformation</td>
<td>支付跳转链接：pay_url为拉起BitFS支付中间页面可通过扫该页面拉起BitFS的App支付界面完成支付，有效时间5分钟</td>
</tr>
<tr>
<td>mch_id</td>
<td>true</td>
<td>String</td>
<td>441649692783284224</td>
<td>BitFS分配给商户的id</td>
</tr>
<tr>
<td>transaction_id</td>
<td>true</td>
<td>String</td>
<td>330183791717372699</td>
<td>网关订单ID</td>
</tr>
<tr>
<td>trade_type</td>
<td>true</td>
<td>String</td>
<td>DEPOSIT</td>
<td>交易类型：充币:DEPOSIT；提币:WITHDRAW</td>
</tr>
<tr>
<td>nonce_str</td>
<td>true</td>
<td>String</td>
<td>FEC838C0BEA5468A82E2467DA4F70B8C</td>
<td>BitFS返回的随机字符串</td>
</tr>
<tr>
<td>sign</td>
<td>true</td>
<td>String</td>
<td>F752ABD95162A4A95E7C4A5E33DAEDD9</td>
<td>BitFS返回的签名</td>
</tr>
</tbody></table>
<h3 id='e08c1d4f9a-3'>错误码</h3>
<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
<th>原因</th>
<th>解决方案</th>
</tr>
</thead><tbody>
<tr>
<td>APPKEY_MCHID_NOT_MATCH</td>
<td>商户machId与商户appkey不匹配</td>
<td>商户machId与商户appkey不匹配</td>
<td>请确认appid和mch_id是否匹配</td>
</tr>
<tr>
<td>SIGNERROR</td>
<td>签名错误</td>
<td>参数签名结果不正确</td>
<td>请检查签名参数和方法是否都符合签名算法要求</td>
</tr>
<tr>
<td>OUT_TRADE_NO_USED</td>
<td>商户订单号重复</td>
<td>同一笔交易不能多次提交</td>
<td>请核实商户订单号是否重复提交</td>
</tr>
<tr>
<td>LACK_PARAMS</td>
<td>缺少参数</td>
<td>缺少必要的请求参数</td>
<td>请检查参数是否齐全</td>
</tr>
<tr>
<td>SYSTEMERROR</td>
<td>系统错误</td>
<td>系统超时</td>
<td>系统异常，请用相同参数重新调用</td>
</tr>
<tr>
<td>COIN_NOT_EXIST</td>
<td>币种不支持</td>
<td>请求的币种不支持</td>
<td>请参考币种列表上传正确的币种</td>
</tr>
<tr>
<td>ACCOUNT_NOT_EXIST</td>
<td>账户不存在</td>
<td>商户账户不存在</td>
<td>请对商户账户信息是否正确</td>
</tr>
</tbody></table>
<h2 id='4ae2658fb7'>数字货币币种提币</h2><h3 id='e106e7a0f4-4'>应用场景</h3>
<p>当BitFS用户在商户系统发起提现时，商户系统调用本接口可以方便地使用商户账户向用户转账，BitFS以实时行情汇率将数字货币金额兑换成USDT。</p>
<h3 id='44afead4bb-4'>概括</h3>
<ul>
<li><p>API名称：数字货币提币接口</p></li>
<li><p>请求方式：HTTP POST</p></li>
<li><p>请求URL：pay/v1/coinwithdraw</p></li>
</ul>
<h3 id='1f9ac54b15-4'>请求参数</h3>
<blockquote>
<p>request:</p>
</blockquote>
<div class="highlight"><pre class="highlight java tab-java"><code><span class="o">{</span>
    <span class="s">"mch_id"</span><span class="o">:</span><span class="s">"441649692783284224"</span><span class="o">,</span>
    <span class="s">"area_code"</span><span class="o">:</span><span class="s">"0086"</span><span class="o">,</span>
    <span class="s">"get_account"</span><span class="o">:</span><span class="s">"13899996666"</span><span class="o">,</span>
    <span class="s">"nonce_str"</span><span class="o">:</span><span class="s">"FEC838C0BEA5468A82E2467DA4F70B8C"</span><span class="o">,</span>
    <span class="s">"out_trade_no"</span><span class="o">:</span><span class="s">"7faf7e60a92d4afa963b83933a949ecc"</span><span class="o">,</span>
    <span class="s">"spbill_create_ip"</span><span class="o">:</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="o">,</span>
    <span class="s">"fee_type"</span><span class="o">:</span><span class="s">"BTC"</span><span class="o">,</span>
    <span class="s">"trade_type"</span><span class="o">:</span><span class="s">"WITHDRAW"</span><span class="o">,</span>
    <span class="s">"total_amount"</span><span class="o">:</span><span class="s">"1000"</span><span class="o">,</span>
    <span class="s">"notify_url"</span><span class="o">:</span><span class="s">"https://www.baidu.com"</span><span class="o">,</span>
    <span class="s">"timestamp"</span><span class="o">:</span><span class="mi">1585471277677</span><span class="o">,</span>
    <span class="s">"appKey"</span><span class="o">:</span><span class="s">"fc798420836184e33c042de1caa2814a"</span><span class="o">,</span>
    <span class="s">"sign"</span><span class="o">:</span><span class="s">"F752ABD95162A4A95E7C4A5E33DAEDD9"</span>
<span class="o">}</span>
</code></pre></div>
<table><thead>
<tr>
<th>变量名</th>
<th>类型</th>
<th>必填</th>
<th>示例值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>mch_id</td>
<td>String</td>
<td>true</td>
<td>441649692783284224</td>
<td>BitFS分配的商户ID</td>
</tr>
<tr>
<td>area_code</td>
<td>String</td>
<td>true</td>
<td>0086</td>
<td>提币账户归属地</td>
</tr>
<tr>
<td>get_account</td>
<td>String</td>
<td>true</td>
<td>13899996666</td>
<td>提币账户：发起提币的账户。</td>
</tr>
<tr>
<td>attach</td>
<td>String</td>
<td>false</td>
<td>普通提币</td>
<td>附加数据：在查询API和支付通知中原样返回，该字段主要用于商户携带订单的自定义数据。</td>
</tr>
<tr>
<td>nonce_str</td>
<td>String</td>
<td>true</td>
<td>FEC838C0BEA5468A82E2467DA4F70B8C</td>
<td>随机字符串：不长于32位。</td>
</tr>
<tr>
<td>out_trade_no</td>
<td>String</td>
<td>true</td>
<td>7faf7e60a92d4afa963b83933a949ecc</td>
<td>商户系统内部的订单号：32个字符内、可包含字母。</td>
</tr>
<tr>
<td>sign_type</td>
<td>String</td>
<td>true</td>
<td>MD5</td>
<td>签名类型：默认为MD5</td>
</tr>
<tr>
<td>spbill_create_ip</td>
<td>String</td>
<td>true</td>
<td>127.0.0.1</td>
<td>终端IP：必须传正确的用户端IP,支持ipv4、ipv6格式</td>
</tr>
<tr>
<td>fee_type</td>
<td>String</td>
<td>true</td>
<td>BTC</td>
<td>货币类型：提币的币编码，<a href="#d6a9971a56">详见法币列表</a></td>
</tr>
<tr>
<td>trade_type</td>
<td>String</td>
<td>true</td>
<td>WITHDRAW</td>
<td>交易类型：充币DEPOSIT；  提币WITHDRAW</td>
</tr>
<tr>
<td>total_amount</td>
<td>BigDecimal</td>
<td>true</td>
<td>1000</td>
<td>订单总金额</td>
</tr>
<tr>
<td>notify_url</td>
<td>String</td>
<td>true</td>
<td>https://www.baidu.com</td>
<td>结果通知地址：接收BitFS支付异步通知回调地址，详情参考<a href="#b384fd01ff">回调通知</a></td>
</tr>
<tr>
<td>timestamp</td>
<td>String</td>
<td>true</td>
<td>1585471277677</td>
<td>时间戳：发起订单时的时间毫秒数</td>
</tr>
<tr>
<td>appKey</td>
<td>String</td>
<td>true</td>
<td>1e75e94982f80bd1f219ea807af96bd5</td>
<td>BitFS分配的商户appKey</td>
</tr>
<tr>
<td>sign</td>
<td>String</td>
<td>true</td>
<td>13F9609AA53A8AEBED5516EE8696A995</td>
<td>签名：<a href="#7b81b8ce22">详见签名生成算法</a>，默认MD5</td>
</tr>
</tbody></table>
<h3 id='3763e2bd8c-4'>返回结果</h3>
<blockquote>
<p>response:</p>
</blockquote>
<div class="highlight"><pre class="highlight java tab-java"><code><span class="o">{</span>
    <span class="s">"code"</span><span class="o">:</span> <span class="mi">0</span><span class="o">,</span>
    <span class="s">"msg"</span><span class="o">:</span> <span class="s">"請求成功"</span><span class="o">,</span>
    <span class="s">"result"</span><span class="o">:</span> <span class="s">"{
        "</span><span class="n">mch_id</span><span class="s">":"</span><span class="mi">441649692783284224</span><span class="s">",
        "</span><span class="n">transaction_id</span><span class="s">":"</span><span class="mi">330183791717372699</span><span class="s">",
        "</span><span class="n">trade_type</span><span class="s">":"</span><span class="no">DEPOSIT</span><span class="s">",
        "</span><span class="n">nonce_str</span><span class="s">":"</span><span class="no">FEC838C0BEA5468A82E2467DA4F70B8C</span><span class="s">",
        "</span><span class="n">sign</span><span class="s">":"</span><span class="no">F752ABD95162A4A95E7C4A5E33DAEDD9</span><span class="s">"
    }"</span>
<span class="o">}</span>
</code></pre></div>
<table><thead>
<tr>
<th>变量名</th>
<th>必填</th>
<th>类型</th>
<th>示例值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>true</td>
<td>Int</td>
<td>0</td>
<td>网关返回码：调用成功时返回0</td>
</tr>
<tr>
<td>msg</td>
<td>true</td>
<td>String(255)</td>
<td>success</td>
<td>返回信息：当code不为0时返回信息为错误原因 ，例如  签名失败  参数格式校验错误</td>
</tr>
</tbody></table>

<aside class="notice">以下字段在code为0时有返回</aside>

<table><thead>
<tr>
<th>变量</th>
<th>必填</th>
<th>类型</th>
<th>示例值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>mch_id</td>
<td>true</td>
<td>String</td>
<td>441649692783284224</td>
<td>BitFS分配给商户的id</td>
</tr>
<tr>
<td>transaction_id</td>
<td>true</td>
<td>String</td>
<td>330183791717372699</td>
<td>网关订单ID</td>
</tr>
<tr>
<td>trade_type</td>
<td>true</td>
<td>String</td>
<td>WITHDRAW</td>
<td>交易类型：充币:DEPOSIT;  提币:WITHDRAW</td>
</tr>
<tr>
<td>nonce_str</td>
<td>true</td>
<td>String</td>
<td>FEC838C0BEA5468A82E2467DA4F70B8C</td>
<td>BitFS返回的随机字符串</td>
</tr>
<tr>
<td>sign</td>
<td>true</td>
<td>String</td>
<td>F752ABD95162A4A95E7C4A5E33DAEDD9</td>
<td>BitFS返回的签名</td>
</tr>
</tbody></table>
<h3 id='e08c1d4f9a-4'>错误码</h3>
<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
<th>原因</th>
<th>解决方案</th>
</tr>
</thead><tbody>
<tr>
<td>APPKEY_MCHID_NOT_MATCH</td>
<td>商户machId与商户appkey不匹配</td>
<td>商户machId与商户appkey不匹配</td>
<td>请确认appid和mch_id是否匹配</td>
</tr>
<tr>
<td>SIGNERROR</td>
<td>签名错误</td>
<td>参数签名结果不正确</td>
<td>请检查签名参数和方法是否都符合签名算法要求</td>
</tr>
<tr>
<td>OUT_TRADE_NO_USED</td>
<td>商户订单号重复</td>
<td>同一笔交易不能多次提交</td>
<td>请核实商户订单号是否重复提交</td>
</tr>
<tr>
<td>LACK_PARAMS</td>
<td>缺少参数</td>
<td>缺少必要的请求参数</td>
<td>请检查参数是否齐全</td>
</tr>
<tr>
<td>SYSTEMERROR</td>
<td>系统错误</td>
<td>系统超时</td>
<td>系统异常，请用相同参数重新调用</td>
</tr>
<tr>
<td>COIN_NOT_EXIST</td>
<td>币种不支持</td>
<td>请求的币种不支持</td>
<td>请参考币种列表上传正确的币种</td>
</tr>
<tr>
<td>TRANSFER_ACCOUNT_NOT_EXIST</td>
<td>转账账户不存在</td>
<td>商户账户不存在</td>
<td>请对商户账户信息是否正确</td>
</tr>
<tr>
<td>YOLLON_NOT_EXIST</td>
<td>收款账户不存在</td>
<td>提币用户Bitfs账户不存在</td>
<td>请确保提币账户为bitfs用户</td>
</tr>
</tbody></table>
<h2 id='b384fd01ff'><strong>回调通知</strong></h2><h3 id='e106e7a0f4-5'>应用场景</h3>
<p>此接口由商户提供。支付完成后，BitFS会把相关支付结果发送给商户，商户需要接收处理，并按文档规范返回应答。</p>
<h3 id='44afead4bb-5'>概括</h3>
<ul>
<li><p>API名称:    订单信息回调通知</p></li>
<li><p>请求方式：POST</p></li>
<li><p>请求连接：该链接是通过【充币/提币API】中提交的参数notify_url设置，如果链接无法访问，商户将无法接收到BitFS通知。</p></li>
<li><p>参数格式：application/json; charset=utf-8</p></li>
</ul>
<h3 id='7ae9b3a153'>回调参数</h3>
<blockquote>
<p>request:</p>
</blockquote>
<div class="highlight"><pre class="highlight java tab-java"><code><span class="o">{</span>
    <span class="s">"mch_id"</span><span class="o">:</span><span class="s">"441649692783284224"</span><span class="o">,</span>
    <span class="s">"out_trade_no"</span><span class="o">:</span><span class="s">"7faf7e60a92d4afa963b83933a949ecc"</span><span class="o">,</span>
    <span class="s">"total_amount"</span><span class="o">:</span><span class="s">"99.99"</span><span class="o">,</span>
    <span class="s">"transaction_id"</span><span class="o">:</span><span class="s">"44240523622d4b2ca836176cd88085d3"</span><span class="o">,</span>
    <span class="s">"trade_type"</span><span class="o">:</span><span class="s">"DEPOSIT"</span><span class="o">,</span>
    <span class="s">"fee_type"</span><span class="o">:</span><span class="s">"CNY"</span><span class="o">,</span>
    <span class="s">"attach"</span><span class="o">:</span><span class="s">"广州分店充值"</span><span class="o">,</span>
    <span class="s">"trade_state"</span><span class="o">:</span><span class="s">"100"</span><span class="o">,</span>
    <span class="s">"tick_price"</span><span class="o">:</span><span class="s">"7.00"</span><span class="o">,</span>
    <span class="s">"order_fee"</span><span class="o">:</span><span class="s">"2.02"</span><span class="o">,</span>
    <span class="s">"trade_state_desc"</span><span class="o">:</span><span class="s">"交易取消"</span><span class="o">,</span>
    <span class="s">"nonce_str"</span><span class="o">:</span><span class="s">"FEC838C0BEA5468A82E2467DA4F70B8C"</span><span class="o">,</span>
    <span class="s">"sign"</span><span class="o">:</span><span class="s">"F752ABD95162A4A95E7C4A5E33DAEDD9"</span>
<span class="o">}</span>
</code></pre></div>
<table><thead>
<tr>
<th>变量</th>
<th>必填</th>
<th>类型</th>
<th>示例值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>mch_id</td>
<td>true</td>
<td>String</td>
<td>441649692783284224</td>
<td>BitFS分配的商户id</td>
</tr>
<tr>
<td>customer_id</td>
<td>false</td>
<td>String</td>
<td>442314630598103040</td>
<td>扫码交易用户标识：当用户扫码获取订单时该字段有返回。</td>
</tr>
<tr>
<td>out_trade_no</td>
<td>true</td>
<td>String</td>
<td>7faf7e60a92d4afa963b83933a949ecc</td>
<td>商户系统内部的订单号：32个字符内、可包含字母。</td>
</tr>
<tr>
<td>nonce_str</td>
<td>true</td>
<td>String</td>
<td>FEC838C0BEA5468A82E2467DA4F70B8C</td>
<td>随机字符串</td>
</tr>
<tr>
<td>total_amount</td>
<td>true</td>
<td>String</td>
<td>14.14</td>
<td>请求金额：当fee_type为法币时单位为元；当fee_type为数字货币时单位为 1个</td>
</tr>
<tr>
<td>transaction_id</td>
<td>true</td>
<td>String</td>
<td>44240523622d4b2ca836176cd88085d3</td>
<td>BitFS生成的订单号</td>
</tr>
<tr>
<td>trade_type</td>
<td>true</td>
<td>String</td>
<td>WITHDRAW</td>
<td>交易类型：充币DEPOSIT；提币WITHDRAW</td>
</tr>
<tr>
<td>tick_price</td>
<td>true</td>
<td>String</td>
<td>7.00</td>
<td>交易行情：发起请求时的BitFS行情价。</td>
</tr>
<tr>
<td>order_fee</td>
<td>true</td>
<td>String</td>
<td>2.02</td>
<td>订单金额：实际交易的数字货币（USDT）数量。</td>
</tr>
<tr>
<td>fee_type</td>
<td>true</td>
<td>String</td>
<td>CNY</td>
<td>发起请求的交易币种：分为法币和数字货币，<a href="#d6a9971a56">详见法币列表</a>。</td>
</tr>
<tr>
<td>attach</td>
<td>false</td>
<td>String</td>
<td>”广州分店充值“</td>
<td>商家的附加信息</td>
</tr>
<tr>
<td>trade_state</td>
<td>true</td>
<td>String</td>
<td>100</td>
<td>交易状态：100 交易成功;200 交易失败;300 交易取消</td>
</tr>
<tr>
<td>trade_state_desc</td>
<td>true</td>
<td>String</td>
<td>交易取消</td>
<td>对交易状态的描述。</td>
</tr>
<tr>
<td>sign</td>
<td>true</td>
<td>String</td>
<td>F752ABD95162A4A95E7C4A5E33DAEDD9</td>
<td>签名。</td>
</tr>
</tbody></table>
<h3 id='70bdef7e25'>返回参数</h3>
<table><thead>
<tr>
<th>变量名</th>
<th>必填</th>
<th>类型</th>
<th>示例值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>return_code</td>
<td>true</td>
<td>String</td>
<td>SUCCESS</td>
<td>返回状态码：SUCCESS/FAIL  SUCCESS表示商户接收通知成功并校验成功</td>
</tr>
<tr>
<td>return_msg</td>
<td>false</td>
<td>String</td>
<td>OK</td>
<td>返回信息：如非空，为错误原因：  签名失败  参数格式校验错误</td>
</tr>
</tbody></table>
<h1 id='87f208b1e6'>查询列表</h1><h2 id='6b7ef9ef44'>查询法币币种</h2><h3 id='e106e7a0f4'>应用场景</h3>
<p>用于在调用BitFS法币币种充值/提币接口时，查询BitFS所支持的法币币种，这样可以实时校验调用接口币种是否支持。 </p>
<h3 id='44afead4bb'>概括</h3>
<ul>
<li>API名称：查询充值/提币支持的法币币种接口</li>
<li>请求方式：HTTP GET</li>
<li>请求URL：pay/v1/currencyList</li>
</ul>
<h3 id='1f9ac54b15'>请求参数</h3>
<p>NULL</p>
<h3 id='3763e2bd8c'>返回结果</h3>
<table><thead>
<tr>
<th>变量名</th>
<th>必填</th>
<th>类型</th>
<th>示例值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>true</td>
<td>Int</td>
<td>0</td>
<td>返回状态码：调用成功时返回0</td>
</tr>
<tr>
<td>msg</td>
<td>true</td>
<td>String(255)</td>
<td>success</td>
<td>返回信息：当code不为0时返回信息为错误原因 ，例如:请求超时</td>
</tr>
</tbody></table>

<aside class="notice">以下字段在code=0时有返回</aside>

<table><thead>
<tr>
<th>变量名</th>
<th>必填</th>
<th>类型</th>
<th>示例值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>fee_name</td>
<td>true</td>
<td>String</td>
<td>人民币</td>
<td>法币的名称</td>
</tr>
<tr>
<td>fee_type</td>
<td>true</td>
<td>String</td>
<td>CNY</td>
<td>法币编码值</td>
</tr>
</tbody></table>
<h2 id='7c3640e1be'>查询数字货币币种</h2><h3 id='e106e7a0f4-2'>应用场景</h3>
<p>用于在调用BitFS数字货币币种充值/提币接口时，查询BitFS所支持的数字货币币种，这样可以实时校验调用接口币种是否支持。 </p>
<h3 id='44afead4bb-2'>概括</h3>
<ul>
<li>API名称：查询充值/提币支持的数字货币币种接口</li>
<li>请求方式：HTTP GET</li>
<li>请求URL：pay/v1/digiccyList</li>
</ul>
<h3 id='1f9ac54b15-2'>请求参数</h3>
<p>NULL</p>
<h3 id='3763e2bd8c-2'>返回结果</h3>
<table><thead>
<tr>
<th>变量名</th>
<th>必填</th>
<th>类型</th>
<th>示例值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>true</td>
<td>Int</td>
<td>0</td>
<td>返回状态码：调用成功时返回0</td>
</tr>
<tr>
<td>msg</td>
<td>true</td>
<td>String(255)</td>
<td>success</td>
<td>返回信息：当code不为0时返回信息为错误原因 ，例如:请求超时</td>
</tr>
</tbody></table>

<aside class="notice">以下字段在code=0时有返回</aside>

<table><thead>
<tr>
<th>变量名</th>
<th>必填</th>
<th>类型</th>
<th>示例值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>fee_name</td>
<td>true</td>
<td>String</td>
<td>比特币</td>
<td>数字货币的名称</td>
</tr>
<tr>
<td>fee_type</td>
<td>true</td>
<td>String</td>
<td>BTC</td>
<td>数字货币编码值</td>
</tr>
</tbody></table>
<h2 id='2adf2aeac3'>查询商户账户余额</h2><h3 id='e106e7a0f4-3'>应用场景</h3>
<p>商户在BitFS注册成功后可以调用本接口方便的查询自身账户余额，灵活调整自身业务。</p>
<h3 id='44afead4bb-3'>概括</h3>
<ul>
<li><p>API名称：查询商户账号余额接口</p></li>
<li><p>请求方式：HTTP  POST</p></li>
<li><p>请求URL：pay/v1/checkacct</p></li>
</ul>
<h3 id='1f9ac54b15-3'>请求参数</h3>
<blockquote>
<p>request:</p>
</blockquote>
<div class="highlight"><pre class="highlight java tab-java"><code><span class="o">{</span>
    <span class="s">"mch_id"</span><span class="o">:</span><span class="s">"441649692783284224"</span><span class="o">,</span>
    <span class="s">"nonce_str"</span><span class="o">:</span><span class="s">"FEC838C0BEA5468A82E2467DA4F70B8C"</span><span class="o">,</span>
    <span class="s">"fee_type"</span><span class="o">:</span><span class="s">"usdt"</span><span class="o">,</span>
    <span class="s">"appKey"</span><span class="o">:</span><span class="s">"f09b650179d5e01930d9c7b78c300147&amp;3129384845945498"</span><span class="o">,</span>
    <span class="s">"sign"</span><span class="o">:</span><span class="err">"</span><span class="no">F752ABD95162A4A95E7C4A5E33DAEDD9</span><span class="err">”</span>
<span class="o">}</span>
</code></pre></div>
<table><thead>
<tr>
<th>变量名</th>
<th>必填</th>
<th>类型</th>
<th>示例值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>mch_id</td>
<td>true</td>
<td>String</td>
<td>441649692783284224</td>
<td>BitFS分配给商户的id</td>
</tr>
<tr>
<td>nonce_str</td>
<td>true</td>
<td>String</td>
<td>FEC838C0BEA5468A82E2467DA4F70B8C</td>
<td>随机字符</td>
</tr>
<tr>
<td>fee_type</td>
<td>true</td>
<td>String</td>
<td>BTC</td>
<td>币编码</td>
</tr>
<tr>
<td>appkey</td>
<td>true</td>
<td>String</td>
<td>fc798420836184e33c042de1caa2814a</td>
<td>BitFS分配的appkey</td>
</tr>
<tr>
<td>sign</td>
<td>true</td>
<td>String</td>
<td>F752ABD95162A4A95E7C4A5E33DAEDD9</td>
<td>签名</td>
</tr>
<tr>
<td>sign_type</td>
<td>false</td>
<td>String</td>
<td>MD5</td>
<td>签名类型，默认MD5</td>
</tr>
</tbody></table>
<h3 id='3763e2bd8c-3'>返回结果</h3>
<blockquote>
<p>response:</p>
</blockquote>
<div class="highlight"><pre class="highlight java tab-java"><code><span class="o">{</span>
    <span class="s">"code"</span><span class="o">:</span> <span class="mi">0</span><span class="o">,</span>
    <span class="s">"msg"</span><span class="o">:</span> <span class="s">"請求成功"</span><span class="o">,</span>
    <span class="s">"result"</span><span class="o">:</span> <span class="s">"{
        "</span><span class="n">mch_id</span><span class="s">":"</span><span class="mi">441649692783284224</span><span class="s">",
        "</span><span class="n">balance</span><span class="s">":"</span><span class="mf">1000.56812</span><span class="s">",
        "</span><span class="n">freeze</span><span class="s">":"</span><span class="mf">1236.9872</span><span class="s">",
        "</span><span class="n">nonce_str</span><span class="s">":"</span><span class="no">FEC838C0BEA5468A82E2467DA4F70B8C</span><span class="s">",
        "</span><span class="n">sign</span><span class="s">":"</span><span class="no">F752ABD95162A4A95E7C4A5E33DAEDD9</span><span class="s">"

    }"</span>
<span class="o">}</span>
</code></pre></div>
<table><thead>
<tr>
<th>变量名</th>
<th>必填</th>
<th>类型</th>
<th>示例值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>true</td>
<td>Int</td>
<td>0</td>
<td>网关返回码：调用成功时返回0</td>
</tr>
<tr>
<td>msg</td>
<td>true</td>
<td>String(255)</td>
<td>success</td>
<td>返回信息：当code不为0时返回信息为错误原因 ，例如 :参数校验错误</td>
</tr>
</tbody></table>

<aside class="notice">以下字段在code为0时有返回</aside>

<table><thead>
<tr>
<th>变量</th>
<th>必填</th>
<th>类型</th>
<th>示例值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>mch_id</td>
<td>true</td>
<td>String</td>
<td>441649692783284224</td>
<td>BitFS分配给商户的id</td>
</tr>
<tr>
<td>balance</td>
<td>true</td>
<td>String</td>
<td>1000.56812</td>
<td>商户当前币种的可用余额</td>
</tr>
<tr>
<td>freeze</td>
<td>true</td>
<td>String</td>
<td>1236.9872</td>
<td>商户当前币种的冻结的数量</td>
</tr>
<tr>
<td>nonce_str</td>
<td>true</td>
<td>String</td>
<td>FEC838C0BEA5468A82E2467DA4F70B8C</td>
<td>BitFS返回的随机字符串</td>
</tr>
<tr>
<td>sign</td>
<td>true</td>
<td>String</td>
<td>F752ABD95162A4A95E7C4A5E33DAEDD9</td>
<td>BitFS返回的签名</td>
</tr>
</tbody></table>
<h3 id='e08c1d4f9a'>错误码</h3>
<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
<th>原因</th>
<th>解决方案</th>
</tr>
</thead><tbody>
<tr>
<td>APPKEY_MCHID_NOT_MATCH</td>
<td>商户machId与商户appkey不匹配</td>
<td>商户machId与商户appkey不匹配</td>
<td>请确认appid和mch_id是否匹配</td>
</tr>
<tr>
<td>SIGNERROR</td>
<td>签名错误</td>
<td>参数签名结果不正确</td>
<td>请检查签名参数和方法是否都符合签名算法要求</td>
</tr>
<tr>
<td>LACK_PARAMS</td>
<td>缺少参数</td>
<td>缺少必要的请求参数</td>
<td>请检查参数是否齐全</td>
</tr>
<tr>
<td>SYSTEMERROR</td>
<td>系统错误</td>
<td>系统超时</td>
<td>系统异常，请用相同参数重新调用</td>
</tr>
<tr>
<td>COIN_NOT_EXIST</td>
<td>币种不支持</td>
<td>请求的币种不支持</td>
<td>请参考币种列表上传正确的币种</td>
</tr>
</tbody></table>
<h2 id='90376e83a0'>查询订单</h2><h3 id='e106e7a0f4-4'>应用场景</h3>
<p>该接口提供所有BitFS支付订单的查询，商户可以通过查询订单接口主动查询订单状态，完成下一步的业务逻辑。</p>

<p><strong>需要调用查询接口的情况</strong></p>

<ul>
<li>当商户后台、网络、服务器等出现异常，商户系统最终未接收到支付通知；</li>
<li>调用支付接口后，返回系统错误或未知交易状态情况；</li>
</ul>
<h3 id='153042ed9e'>概述</h3>
<ul>
<li><p>API名称：代理商订单查询接口</p></li>
<li><p>请求方式：HTTP POST</p></li>
<li><p>请求URL：pay/v1/queryorder</p></li>
</ul>
<h3 id='1f9ac54b15-4'>请求参数</h3>
<blockquote>
<p>request:</p>
</blockquote>
<div class="highlight"><pre class="highlight java tab-java"><code><span class="o">{</span>
    <span class="s">"mch_id"</span><span class="o">:</span><span class="s">"441649692783284224"</span><span class="o">,</span>
    <span class="s">"out_trade_no"</span><span class="o">:</span><span class="s">"7faf7e60a92d4afa963b83933a949ecc"</span><span class="o">,</span>
    <span class="s">"transaction_id"</span><span class="o">:</span><span class="s">"330183791717372699"</span><span class="o">,</span>
    <span class="s">"nonce_str"</span><span class="o">:</span><span class="s">"FEC838C0BEA5468A82E2467DA4F70B8C"</span><span class="o">,</span>
    <span class="s">"appKey"</span><span class="o">:</span><span class="s">"a58b139c85adbccf3a4b3a8e83a2bfba"</span><span class="o">,</span>
    <span class="s">"sign"</span><span class="o">:</span><span class="s">"FB87C3106C43DF67513ABDFE8029A096"</span>
<span class="o">}</span>
</code></pre></div>
<table><thead>
<tr>
<th>变量</th>
<th>必填</th>
<th>类型</th>
<th>示例值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>mch_id</td>
<td>true</td>
<td>String</td>
<td>441649692783284224</td>
<td>BitFS分配的商户</td>
</tr>
<tr>
<td>out_trade_no</td>
<td>true</td>
<td>String</td>
<td>7faf7e60a92d4afa963b83933a949ecc</td>
<td>商户系统内部的订单号：32个字符内、可包含字母</td>
</tr>
<tr>
<td>transaction_id</td>
<td>String</td>
<td>true</td>
<td>330183791717372699</td>
<td>网关订单ID;                                                               注意：请求参数中的商户系统内部订单号：“out_trade_no”和网关订单ID：“transaction_id”。二选一，如果两个都返回则默认使用参数为“商户系统内部订单号“：out_trade_no</td>
</tr>
<tr>
<td>nonce_str</td>
<td>true</td>
<td>String</td>
<td>FEC838C0BEA5468A82E2467DA4F70B8C</td>
<td>随机字符串</td>
</tr>
<tr>
<td>sign_type</td>
<td>false</td>
<td>String</td>
<td>MD5</td>
<td>签名类型：默认为MD5</td>
</tr>
<tr>
<td>appKey</td>
<td>true</td>
<td>String</td>
<td>a58b139c85adbccf3a4b3a8e83a2bfba</td>
<td>商户的appkey</td>
</tr>
<tr>
<td>sign</td>
<td>true</td>
<td>String</td>
<td>FB87C3106C43DF67513ABDFE8029A096</td>
<td>签名</td>
</tr>
</tbody></table>
<h3 id='3763e2bd8c-4'>返回结果</h3>
<blockquote>
<p>response:</p>
</blockquote>
<div class="highlight"><pre class="highlight java tab-java"><code><span class="o">{</span>
    <span class="s">"code"</span><span class="o">:</span> <span class="mi">0</span><span class="o">,</span>
    <span class="s">"msg"</span><span class="o">:</span> <span class="s">"請求成功"</span><span class="o">,</span>
    <span class="s">"result"</span><span class="o">:</span> <span class="s">"{
        "</span><span class="n">mch_id</span><span class="s">":"</span><span class="mi">441649692783284224</span><span class="s">",
        "</span><span class="n">out_trade_no</span><span class="s">":"</span><span class="mi">7</span><span class="n">faf7e60a92d4afa963b83933a949ecc</span><span class="s">",
        "</span><span class="n">total_amount</span><span class="s">":"</span><span class="mf">14.14</span><span class="s">",
        "</span><span class="n">transaction_id</span><span class="s">":"</span><span class="mi">44240523622</span><span class="n">d4b2ca836176cd88085d3</span><span class="s">",
        "</span><span class="n">trade_type</span><span class="s">":"</span><span class="no">DEPOSIT</span><span class="s">",
        "</span><span class="n">fee_type</span><span class="s">":"</span><span class="no">CNY</span><span class="s">",
        "</span><span class="n">attach</span><span class="s">":"</span><span class="n">广州分店充值</span><span class="s">",
        "</span><span class="n">trade_state</span><span class="s">":"</span><span class="mi">100</span><span class="s">",
        "</span><span class="n">tick_price</span><span class="s">":"</span><span class="mf">7.00</span><span class="s">",
        "</span><span class="n">order_fee</span><span class="s">":"</span><span class="mf">2.02</span><span class="s">",
        "</span><span class="n">trade_state_desc</span><span class="s">":"</span><span class="n">交易取消</span><span class="s">",
        "</span><span class="n">nonce_str</span><span class="s">":"</span><span class="no">FEC838C0BEA5468A82E2467DA4F70B8C</span><span class="s">",
        "</span><span class="n">sign</span><span class="s">":"</span><span class="no">F752ABD95162A4A95E7C4A5E33DAEDD9</span><span class="s">"
    }"</span>
<span class="o">}</span>
</code></pre></div>
<table><thead>
<tr>
<th>变量名</th>
<th>必填</th>
<th>类型</th>
<th>示例值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>true</td>
<td>Int</td>
<td>0</td>
<td>网关返回码：调用成功时返回0</td>
</tr>
<tr>
<td>msg</td>
<td>true</td>
<td>String(255)</td>
<td>success</td>
<td>返回信息：当code不为0时返回信息为错误原因 ，例如参数校验错误</td>
</tr>
</tbody></table>

<aside class="notice">以下字段在code为0时有返回</aside>

<table><thead>
<tr>
<th>变量</th>
<th>必填</th>
<th>类型</th>
<th>示例值</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>mch_id</td>
<td>true</td>
<td>String</td>
<td>441649692783284224</td>
<td>BitFS分配的商户</td>
</tr>
<tr>
<td>customer_id</td>
<td>false</td>
<td>String</td>
<td>442314630598103040</td>
<td>扫码交易用户标识，当用户扫码获取订单时该字段有返回。</td>
</tr>
<tr>
<td>out_trade_no</td>
<td>true</td>
<td>String</td>
<td>7faf7e60a92d4afa963b83933a949ecc</td>
<td>商户系统内部的订单号,32个字符内、可包含字母。</td>
</tr>
<tr>
<td>nonce_str</td>
<td>true</td>
<td>String</td>
<td>FEC838C0BEA5468A82E2467DA4F70B8C</td>
<td>随机字符串</td>
</tr>
<tr>
<td>total_amount</td>
<td>true</td>
<td>String</td>
<td>14.14</td>
<td>商户请求交易的金额：当fee_type为法币时单位为元；当fee_type为数字货币时单位为 1个</td>
</tr>
<tr>
<td>transaction_id</td>
<td>true</td>
<td>String</td>
<td>44240523622d4b2ca836176cd88085d3</td>
<td>BitFS生成的订单号</td>
</tr>
<tr>
<td>trade_type</td>
<td>true</td>
<td>String</td>
<td>WITHDRAW</td>
<td>交易类型：充币:DEPOSIT;  提币:WITHDRAW</td>
</tr>
<tr>
<td>fee_type</td>
<td>true</td>
<td>String</td>
<td>CNY</td>
<td>发起请求的交易币种：分为法币和数字货币，<a href="#d6a9971a56">详见法币列表</a>。</td>
</tr>
<tr>
<td>tick_price</td>
<td>true</td>
<td>String</td>
<td>7.00</td>
<td>发起请求时的BitFS行情价。</td>
</tr>
<tr>
<td>order_fee</td>
<td>true</td>
<td>String</td>
<td>2.02</td>
<td>实际交易的数字货币（USDT）数量。</td>
</tr>
<tr>
<td>attach</td>
<td>false</td>
<td>String</td>
<td>”广州分店充值“</td>
<td>商家的附加信息</td>
</tr>
<tr>
<td>trade_state</td>
<td>true</td>
<td>String</td>
<td>100</td>
<td>交易状态：100 交易成功 ;200 交易失败;300 交易取消</td>
</tr>
<tr>
<td>trade_state_desc</td>
<td>true</td>
<td>String</td>
<td>交易取消</td>
<td>对交易状态的描述。</td>
</tr>
<tr>
<td>sign</td>
<td>true</td>
<td>String</td>
<td>F752ABD95162A4A95E7C4A5E33DAEDD9</td>
<td>签名。</td>
</tr>
</tbody></table>
<h3 id='e08c1d4f9a-2'>错误码</h3>
<table><thead>
<tr>
<th>名称</th>
<th>描述</th>
<th>原因</th>
<th>解决方案</th>
</tr>
</thead><tbody>
<tr>
<td>APPKEY_MCHID_NOT_MATCH</td>
<td>商户machId与商户appkey不匹配</td>
<td>商户machId与商户appkey不匹配</td>
<td>请确认appid和mch_id是否匹配</td>
</tr>
<tr>
<td>SIGNERROR</td>
<td>签名错误</td>
<td>参数签名结果不正确</td>
<td>请检查签名参数和方法是否都符合签名算法要求</td>
</tr>
<tr>
<td>LACK_PARAMS</td>
<td>缺少参数</td>
<td>缺少必要的请求参数</td>
<td>请检查参数是否齐全</td>
</tr>
<tr>
<td>SYSTEMERROR</td>
<td>系统错误</td>
<td>系统超时</td>
<td>系统异常，请用相同参数重新调用</td>
</tr>
<tr>
<td>ORDERNOTEXIST</td>
<td>订单号不存在</td>
<td>查询系统中不存在此交易订单号</td>
<td>该API只能查提交交易返回成功的商户订单，请商户检查需要查询的商户订单号是否正确</td>
</tr>
</tbody></table>
<h1 id='54709db3b7'>参考资料</h1><h2 id='d6a9971a56'>交易货币类型</h2><h3 id='1'>1.法币类型</h3>
<table><thead>
<tr>
<th>币种名称</th>
<th>币种编码</th>
</tr>
</thead><tbody>
<tr>
<td>人民币</td>
<td>CNY</td>
</tr>
<tr>
<td>美元</td>
<td>USD</td>
</tr>
</tbody></table>
<h3 id='2'>2.数字货币类型</h3>
<table><thead>
<tr>
<th>货币名称</th>
<th>货币编码</th>
</tr>
</thead><tbody>
<tr>
<td>比特币</td>
<td>BTC</td>
</tr>
<tr>
<td>TetherUSD</td>
<td>USDT</td>
</tr>
<tr>
<td>以太坊</td>
<td>ETH</td>
</tr>
</tbody></table>
<h2 id='7b81b8ce22'>签名算法</h2><h3 id='58c7f839ae'>签名生成的通用步骤如下：</h3>
<p><strong>第一步：</strong></p>

<p>设所有发送或者接收到的数据为集合M，将集合M内非空参数值的参数按照参数名ASCII码从小到大排序（字典序),</p>

<p>使用URL键值对的格式（即key1=value1&amp;key2=value2…）拼接成字符串param_string。</p>

<p>以下为签名规则：</p>

<ul>
<li>参数名ASCII码从小到大排序（字典序）；</li>
<li>如果参数的值为空不参与签名；</li>
<li>参数名区分大小写；</li>
<li>验证调用返回或BitFS 主动通知签名时，传送的sign参数不参与签名，将生成的签名与该sign值作校验。</li>
<li>BitFS 接口可能增加字段，验证签名时必须支持增加的扩展字段</li>
</ul>

<p><strong>第二步:</strong></p>

<p>在param_string最后拼接上key得到sign_string字符串，然后对sign_string进行MD5运算，再将得到的字符串所有字符转换为大写，得到sign值sign_value。</p>

<p>key设置路径：BitFS 商户平台--&gt;设置--&gt;商家私钥设置 </p>
<h3 id='91f38b9aa6'>举例</h3>
<p>传递如下参数：</p>

<p><code>&quot;mch_id&quot;:&quot;441649692783284224&quot;,</code></p>

<p><code>&quot;out_trade_no&quot;:&quot;7faf7e60a92d4afa963b83933a949ecc&quot;,</code></p>

<p><code>&quot;nonce_str&quot;:&quot;FEC838C0BEA5468A82E2467DA4F70B8C&quot;,</code></p>

<p><code>&quot;appKey&quot;:&quot;a58b139c85adbccf3a4b3a8e83a2bfba&quot;,</code></p>

<p><strong>第一步:</strong></p>

<p>将参数按字典序排序</p>

<p><code>param_string=&quot;appKey=a58b139c85adbccf3a4b3a8e83a2bfba&amp;mch_id=441649692783284224&amp;nonce_str=FEC838C0BEA5468A82E2467DA4F70B8C&amp;out_trade_no=7faf7e60a92d4afa963b83933a949ecc&quot;</code></p>

<p><strong>第二步:</strong></p>

<p>拼接商户私钥然后进行MD5运算</p>

<p><code>sign_string=&quot;param_string&amp;key=3e678f6e4546f6968c99b52ae4b6659b2cc44d3543ae2fd7538ca48faabfc68e&quot;</code></p>

<p><code>sign=MD5(sign_string).toUpperCase()=&quot;81A3948E5FFEF46F8A2FDE51D8EF3A6D&quot;</code></p>

<p>生成随机数算法</p>

<p>BitFS API接口协议中包含字段nonce_str，主要保证签名不可预测。推荐调用随机数函数生成，将得到的值转换为字符串。</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="json">json</a>
          </div>
      </div>
    </div>
  </body>
</html>
